============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.1, pluggy-1.6.0 -- D:\Dmarket\DMarket-Telegram-Bot\DMarket-Telegram-Bot\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: D:\Dmarket\DMarket-Telegram-Bot\DMarket-Telegram-Bot
configfile: pyproject.toml
plugins: anyio-4.11.0, Faker-38.0.0, asyncio-1.3.0, cov-7.0.0, mock-3.15.1, xdist-3.8.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... collected 1039 items

tests/dmarket/test_api_unified.py::test_api_initialization PASSED        [  0%]
tests/dmarket/test_api_unified.py::test_generate_headers PASSED          [  0%]
tests/dmarket/test_api_unified.py::test_get_user_balance PASSED          [  0%]
tests/dmarket/test_api_unified.py::test_get_user_balance_error PASSED    [  0%]
tests/dmarket/test_api_unified.py::test_get_market_items PASSED          [  0%]
tests/dmarket/test_api_unified.py::test_handle_rate_limit PASSED         [  0%]
tests/dmarket/test_api_unified.py::test_api_timeout PASSED               [  0%]
tests/dmarket/test_api_unified.py::test_parse_balance_format1 PASSED     [  0%]
tests/dmarket/test_api_unified.py::test_parse_balance_format2 PASSED     [  0%]
tests/dmarket/test_api_unified.py::test_parse_balance_empty PASSED       [  0%]
tests/dmarket/test_arbitrage.py::TestConstants::test_games_defined PASSED [  1%]
tests/dmarket/test_arbitrage.py::TestConstants::test_fee_values PASSED   [  1%]
tests/dmarket/test_arbitrage.py::TestConstants::test_min_profit_percent_modes PASSED [  1%]
tests/dmarket/test_arbitrage.py::TestConstants::test_price_ranges_ascending FAILED [  1%]
tests/dmarket/test_arbitrage.py::TestCacheFunctions::test_save_to_cache PASSED [  1%]
tests/dmarket/test_arbitrage.py::TestCacheFunctions::test_get_cached_results_fresh PASSED [  1%]
tests/dmarket/test_arbitrage.py::TestCacheFunctions::test_get_cached_results_expired PASSED [  1%]
tests/dmarket/test_arbitrage.py::TestCacheFunctions::test_get_cached_results_not_exists PASSED [  1%]
tests/dmarket/test_arbitrage.py::TestCacheFunctions::test_cache_key_uniqueness PASSED [  1%]
tests/dmarket/test_arbitrage.py::TestFetchMarketItems::test_fetch_market_items_success FAILED [  1%]
tests/dmarket/test_arbitrage.py::TestFetchMarketItems::test_fetch_market_items_empty PASSED [  2%]
tests/dmarket/test_arbitrage.py::TestFetchMarketItems::test_fetch_market_items_api_error PASSED [  2%]
tests/dmarket/test_arbitrage.py::TestArbitrageFunctions::test_arbitrage_boost PASSED [  2%]
tests/dmarket/test_arbitrage.py::TestArbitrageFunctions::test_arbitrage_mid PASSED [  2%]
tests/dmarket/test_arbitrage.py::TestArbitrageFunctions::test_arbitrage_pro PASSED [  2%]
tests/dmarket/test_arbitrage.py::TestArbitrageTrader::test_arbitrage_trader_instantiation FAILED [  2%]
tests/dmarket/test_arbitrage.py::TestArbitrageTrader::test_arbitrage_trader_has_methods FAILED [  2%]
tests/dmarket/test_arbitrage.py::TestFindArbitrageItems::test_find_arbitrage_items_basic FAILED [  2%]

================================== FAILURES ===================================
E   assert 20.0 <= 0.5
D:\Dmarket\DMarket-Telegram-Bot\DMarket-Telegram-Bot\tests\dmarket\test_arbitrage.py:53: assert 20.0 <= 0.5
E   assert 0 == 2
     +  where 0 = len([])
----------------------------- Captured log setup ------------------------------
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
D:\Dmarket\DMarket-Telegram-Bot\DMarket-Telegram-Bot\tests\dmarket\test_arbitrage.py:146: assert 0 == 2
E   TypeError: ArbitrageTrader.__init__() got an unexpected keyword argument 'dmarket_api'
D:\Dmarket\DMarket-Telegram-Bot\DMarket-Telegram-Bot\tests\dmarket\test_arbitrage.py:201: TypeError: ArbitrageTrader.__init__() got an unexpected keyword argument 'dmarket_api'
E   TypeError: ArbitrageTrader.__init__() got an unexpected keyword argument 'dmarket_api'
D:\Dmarket\DMarket-Telegram-Bot\DMarket-Telegram-Bot\tests\dmarket\test_arbitrage.py:209: TypeError: ArbitrageTrader.__init__() got an unexpected keyword argument 'dmarket_api'
E   TypeError: find_arbitrage_items() got an unexpected keyword argument 'dmarket_api'
----------------------------- Captured log setup ------------------------------
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
D:\Dmarket\DMarket-Telegram-Bot\DMarket-Telegram-Bot\tests\dmarket\test_arbitrage.py:224: TypeError: find_arbitrage_items() got an unexpected keyword argument 'dmarket_api'
=========================== short test summary info ===========================
FAILED tests/dmarket/test_arbitrage.py::TestConstants::test_price_ranges_ascending - assert 20.0 <= 0.5
FAILED tests/dmarket/test_arbitrage.py::TestFetchMarketItems::test_fetch_market_items_success - assert 0 == 2
 +  where 0 = len([])
FAILED tests/dmarket/test_arbitrage.py::TestArbitrageTrader::test_arbitrage_trader_instantiation - TypeError: ArbitrageTrader.__init__() got an unexpected keyword argument 'dmarket_api'
FAILED tests/dmarket/test_arbitrage.py::TestArbitrageTrader::test_arbitrage_trader_has_methods - TypeError: ArbitrageTrader.__init__() got an unexpected keyword argument 'dmarket_api'
FAILED tests/dmarket/test_arbitrage.py::TestFindArbitrageItems::test_find_arbitrage_items_basic - TypeError: find_arbitrage_items() got an unexpected keyword argument 'dmarket_api'
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 5 failures !!!!!!!!!!!!!!!!!!!!!!!!!!
======================== 5 failed, 23 passed in 5.88s =========================
