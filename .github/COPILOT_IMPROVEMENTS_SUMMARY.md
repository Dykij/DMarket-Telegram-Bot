# üöÄ GitHub Copilot Background Agent - –†–µ–∑—é–º–µ —É–ª—É—á—à–µ–Ω–∏–π

**–î–∞—Ç–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 14 –¥–µ–∫–∞–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** 2.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≤–Ω–µ–¥—Ä–µ–Ω–æ

---

## üìä –û–±–∑–æ—Ä –≤–Ω–µ–¥—Ä–µ–Ω–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π

### 1. ‚úÖ Workflows –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (4 —Ñ–∞–π–ª–∞)

#### `.github/workflows/copilot-coding-agent-setup.yaml`

**–û—Å–Ω–æ–≤–Ω–æ–π workflow –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ä–µ–¥—ã –∞–≥–µ–Ω—Ç–∞**

–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- ‚úÖ Python 3.12 setup —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º pip
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑ `requirements.txt`
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ `.mypy_cache`, `.ruff_cache`, `.pytest_cache` (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–æ 5x)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ async –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (httpx, telegram, asyncio)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PYTHONPATH –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ Timeout 10 –º–∏–Ω—É—Ç (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- –ë–µ–∑ –∫—ç—à–∞: ~2-3 –º–∏–Ω—É—Ç—ã
- –° –∫—ç—à–µ–º: ~30 —Å–µ–∫—É–Ω–¥

#### `.github/workflows/copilot-scheduled-tasks.yaml`

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏**

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:

- üîÑ **daily-code-quality** (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ 02:00 UTC)
  - –ó–∞–ø—É—Å–∫: `ruff check`, `mypy`, `pytest -m 'not slow'`
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π PR –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

- üì¶ **weekly-dependency-update** (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ 02:00)
  - Safety check –¥–ª—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

- üß™ **weekly-test-coverage** (—Å—Ä–µ–¥–∞ 02:00)
  - –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è —á–µ—Ä–µ–∑ htmlcov/
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è <80% –º–æ–¥—É–ª–µ–π
  - –§–æ–∫—É—Å –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç—è—Ö

- üìö **weekly-documentation** (–ø—è—Ç–Ω–∏—Ü–∞ 02:00)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ docs/
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API reference
  - –í–∞–ª–∏–¥–∞—Ü–∏—è docstrings

- ‚ö° **performance-monitoring** (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
  - –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ arbitrage_scanner.py
  - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏ response time >2s
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ async –æ–ø–µ—Ä–∞—Ü–∏–π

**–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:**

```bash
gh workflow run copilot-scheduled-tasks.yaml
```

#### `.github/workflows/copilot-security-audit.yaml`

**–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- üîí Bandit —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (SQL injection, hardcoded secrets)
- üõ°Ô∏è Safety –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö CVE
- üîç Ruff security rules (select=S)
- üìä JSON –æ—Ç—á–µ—Ç—ã —Å retention 30 –¥–Ω–µ–π
- üö® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ PR –¥–ª—è CRITICAL/HIGH —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π

–¢—Ä–∏–≥–≥–µ—Ä—ã:

- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 03:00 UTC
- –ü—Ä–∏ push –≤ main/develop
- –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Actions

**–†–µ–∞–∫—Ü–∏—è:**

- CRITICAL/HIGH ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π PR + notification
- MEDIUM ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ issue
- LOW ‚Üí –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ commit

#### `.github/workflows/copilot-issue-templates.yaml`

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å issues**

–§—É–Ω–∫—Ü–∏–∏:

- üè∑Ô∏è –ê–≤—Ç–æ-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –ø–æ label `copilot-task`
- ü§ñ –ê–≤—Ç–æ-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- üìù –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º:
  - "test" ‚Üí `copilot-test`
  - "refactor" ‚Üí `copilot-refactor`
  - "docs" ‚Üí `copilot-docs`
  - "security" ‚Üí `copilot-security`
  - "bug" ‚Üí `copilot-bugfix`

---

### 2. ‚úÖ –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ (2 —Ñ–∞–π–ª–∞)

#### `.github/copilot-agent-instructions.md`

**–î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è Background Agent (389 —Å—Ç—Ä–æ–∫)**

–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞**
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (async/await –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
   - –¢–∏–ø–∏–∑–∞—Ü–∏—è (MyPy strict mode)
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (80%+ coverage, FIRST –ø—Ä–∏–Ω—Ü–∏–ø—ã)
   - –ö–∞—á–µ—Å—Ç–≤–æ (Ruff 0.14+, Black 25.0+)
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (DRY_RUN, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)

2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞**
   - Dependency flow: `telegram_bot ‚Üí dmarket ‚Üí utils`
   - –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

3. **–°—Ç–∏–ª—å –∫–æ–¥–∞**
   - ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ async/await –∫–æ–¥–∞
   - ‚úÖ –ü—Ä–∏–º–µ—Ä—ã —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Å TypeAlias
   - ‚úÖ Structlog –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
   - ‚úÖ Tenacity –¥–ª—è retry logic
   - ‚ùå –ê–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —á—Ç–æ –∏–∑–±–µ–≥–∞—Ç—å

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - AAA –ø–∞—Ç—Ç–µ—Ä–Ω —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
   - –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ: `test_<function>_<condition>_<result>`
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –º–æ–¥—É–ª—è–º
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ coverage –∫–æ–º–∞–Ω–¥

5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pydantic-settings
   - DRY_RUN —Ä–µ–∂–∏–º
   - –ó–∞–ø—Ä–µ—Ç—ã (—Ö–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤, –≥–æ–ª—ã–µ except)

6. **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏**
   - –ü–æ—à–∞–≥–æ–≤—ã–µ –≥–∞–π–¥—ã –¥–ª—è:
     - –î–æ–±–∞–≤–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
     - –°–æ–∑–¥–∞–Ω–∏—è Telegram –∫–æ–º–∞–Ω–¥—ã
     - –î–æ–±–∞–≤–ª–µ–Ω–∏—è game filter

7. **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –¢–∞–±–ª–∏—Ü–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º–∏ –∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
   - –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤

8. **–û—Ç–ª–∞–¥–∫–∞**
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LOG_LEVEL
   - Sentry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

9. **Checklist –¥–ª—è PR**
   - 8 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–µ—Ä–µ–¥ merge

#### `.github/COPILOT_AGENT_GUIDE.md`

**–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (529 —Å—Ç—Ä–æ–∫)**

–†–∞–∑–¥–µ–ª—ã:

1. **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**
   - –ê–∫—Ç–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ –≤–µ–±/CLI
   - –ü–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö workflow —Ñ–∞–π–ª–æ–≤
   - –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ –ø—Ä–æ–µ–∫—Ç

3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
   - –¢–∞–±–ª–∏—Ü–∞ scheduled tasks
   - –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
   - Security audit –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

4. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã**
   - Test Coverage Agent
   - Refactoring Agent
   - Documentation Agent
   - Security Agent
   - Performance Agent

   –ö–∞–∂–¥—ã–π —Å —à–∞–±–ª–æ–Ω–æ–º issue –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

5. **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏**
   - –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á (‚úÖ —Ö–æ—Ä–æ—à–∏–µ / ‚ùå –ø–ª–æ—Ö–∏–µ –ø—Ä–∏–º–µ—Ä—ã)
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
   - –†–µ–≤—å—é PR –æ—Ç Copilot

6. **Troubleshooting**
   - –ê–≥–µ–Ω—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
   - Workflow –ø–∞–¥–∞–µ—Ç
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥
   - Scheduled tasks –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

7. **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Actions
   - Copilot API –ª–∏–º–∏—Ç—ã
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ PR

8. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã**
   - –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
   - GitHub Copilot docs

---

### 3. ‚úÖ Issue Templates (4 —à–∞–±–ª–æ–Ω–∞)

#### `.github/ISSUE_TEMPLATE/copilot-task.md`

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –∑–∞–¥–∞—á**

–°–µ–∫—Ü–∏–∏:

- üìã –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- üéØ –¶–µ–ª—å
- üìÅ –ó–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- üö´ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- ‚úîÔ∏è –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- üìö –°—Å—ã–ª–∫–∏
- üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ @copilot
- –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ `copilot/issue-{number}`
- –ó–∞–ø—Ä–æ—Å —Ä–µ–≤—å—é –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

#### `.github/ISSUE_TEMPLATE/copilot-test-coverage.md`

**–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤**

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- üìä –°–µ–∫—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∫—Ä—ã—Ç–∏—è
- üîç –ß–µ–∫–ª–∏—Å—Ç —Ñ–æ–∫—É—Å–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è AAA, naming, mocking, parametrize
- üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è
- üìö –ü—Ä–∏–º–µ—Ä—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

#### `.github/ISSUE_TEMPLATE/copilot-refactor.md`

**–î–ª—è –∑–∞–¥–∞—á —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞**

–°–µ–∫—Ü–∏–∏:

- üêõ –ü—Ä–æ–±–ª–µ–º—ã (performance, complexity, duplication)
- üí° –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- üö´ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å API!)
- ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è (–ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úîÔ∏è –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å cProfile –∫–æ–º–∞–Ω–¥–∞–º–∏

#### `.github/ISSUE_TEMPLATE/copilot-security.md`

**–î–ª—è security issues**

–ü–æ–ª—è:

- üîç –ò—Å—Ç–æ—á–Ω–∏–∫ (Bandit, Safety, GitHub Alert, CodeQL)
- üìä Severity level
- üõ†Ô∏è –¢—Ä–µ–±—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å security –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- üö´ –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å (—Ö–∞—Ä–¥–∫–æ–¥, deprecated crypto)
- ‚ö†Ô∏è –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è CRITICAL

---

### 4. ‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã (`.github/copilot-custom-agents.yaml`)

**5 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏:**

#### 1. test-coverage-agent

- Capabilities: test_generation, coverage_analysis, mocking, parametrization
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: AAA –ø–∞—Ç—Ç–µ—Ä–Ω, pytest-mock, coverage ‚â•85%
- Tools: pytest, pytest-cov, pytest-mock, hypothesis

#### 2. refactoring-agent

- Capabilities: code_optimization, async_refactoring, performance_analysis
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å API, asyncio.gather(), —Å–Ω–∏–∑–∏—Ç—å complexity
- Tools: ruff, mypy, cProfile, radon

#### 3. documentation-agent

- Capabilities: docstring_generation, api_documentation, guide_writing
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: Google Style docstrings —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- Tools: mkdocs, sphinx, interrogate

#### 4. security-agent

- Capabilities: vulnerability_detection, dependency_updates, secret_scanning
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: Bandit, Safety, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã CRITICAL/HIGH
- Tools: bandit, safety, ruff (select=S)

#### 5. performance-agent

- Capabilities: profiling, async_optimization, caching, query_optimization
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, cProfile, Redis caching
- Tools: cProfile, pytest-benchmark, memory_profiler

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
gh copilot agent start --agent test-coverage-agent --task "..."
```

–ò–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ labels –≤ issues.

---

### 5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤

#### `.github/copilot-instructions.md`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**

- –†–∞–∑–¥–µ–ª "–í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞" —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º:
  - GitHub Copilot CLI
  - VS Code Agent Mode
  - Background Agent
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
- –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞             | –î–æ          | –ü–æ—Å–ª–µ                | –£–ª—É—á—à–µ–Ω–∏–µ       |
| ------------------- | ----------- | -------------------- | --------------- |
| **Workflows**       | 1 –±–∞–∑–æ–≤—ã–π   | 4 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö | +300%           |
| **Issue templates** | 0           | 4 —Ç–∏–ø–∞ –∑–∞–¥–∞—á         | –ù–æ–≤–æ–µ           |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**    | 50 —Å—Ç—Ä–æ–∫    | 1000+ —Å—Ç—Ä–æ–∫          | +1900%          |
| **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**   | –†—É—á–Ω–∞—è      | 5 scheduled tasks    | –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ  |
| **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**   | –û–±—â–∏–π –∞–≥–µ–Ω—Ç | 5 –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤  | –¢–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |
| **Security audit**  | –ù–µ—Ç         | –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π           | –ö—Ä–∏—Ç–∏—á–Ω–æ        |
| **–í—Ä–µ–º—è setup**     | ~5 –º–∏–Ω—É—Ç    | ~30 —Å–µ–∫—É–Ω–¥ (–∫—ç—à)     | -90%            |

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- ‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π security audit
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ PR –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ‚úÖ Bandit + Safety –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ CodeQL analysis
- ‚úÖ Secret scanning

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

- ‚úÖ 5 –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏
- ‚úÖ –¢–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- ‚úÖ Issue templates –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (mypy, ruff, pytest)
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ workflow runs
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ timeout –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–∞

```bash
# –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
Settings ‚Üí Code and automation ‚Üí Copilot ‚Üí Enable Copilot coding agent
```

### 2. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É

**–ß–µ—Ä–µ–∑ –≤–µ–±:**

- Issues ‚Üí New Issue ‚Üí "Copilot Task"
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω
- –ù–∞–∑–Ω–∞—á–∏—Ç—å –Ω–∞ @copilot

**–ß–µ—Ä–µ–∑ CLI:**

```bash
gh copilot agent start --task "Improve test coverage for src/dmarket/arbitrage_scanner.py"
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–∞
gh copilot agent status

# –õ–æ–≥–∏ workflows
gh run list --workflow=copilot-scheduled-tasks.yaml
gh run view <run-id> --log
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª                                    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                      |
| --------------------------------------- | ------------------------------- |
| `.github/COPILOT_AGENT_GUIDE.md`        | –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `.github/copilot-agent-instructions.md` | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞           |
| `.github/copilot-custom-agents.yaml`    | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤   |
| `.github/copilot-instructions.md`       | –û–±—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞        |

### Workflows

| –§–∞–π–ª                              | –û–ø–∏—Å–∞–Ω–∏–µ             |
| --------------------------------- | -------------------- |
| `copilot-coding-agent-setup.yaml` | Setup –æ–∫—Ä—É–∂–µ–Ω–∏—è      |
| `copilot-scheduled-tasks.yaml`    | –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ |
| `copilot-security-audit.yaml`     | –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏   |
| `copilot-issue-templates.yaml`    | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è issues |

### Issue Templates

| –§–∞–π–ª                       | –î–ª—è —á–µ–≥–æ             |
| -------------------------- | -------------------- |
| `copilot-task.md`          | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ |
| `copilot-test-coverage.md` | –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤     |
| `copilot-refactor.md`      | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥          |
| `copilot-security.md`      | Security fixes       |

---

## ‚úÖ Checklist –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- [x] –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `.venv`
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å workflows (4 —Ñ–∞–π–ª–∞)
- [x] –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- [x] –ù–∞–ø–∏—Å–∞—Ç—å –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [x] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å issue templates (4 —à–∞–±–ª–æ–Ω–∞)
- [x] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- [x] –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å setup workflow
- [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å Copilot Agent –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å scheduled tasks
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å security alerts

---

## üéì –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ

1. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å Copilot Agent** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö GitHub
2. **–°–æ–∑–¥–∞—Ç—å labels** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
   - `copilot-task`
   - `copilot-test`
   - `copilot-refactor`
   - `copilot-docs`
   - `copilot-security`

### –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏

1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ issues** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∞–≥–µ–Ω—Ç–∞
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions permissions**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É scheduled tasks**
4. **–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–µ—Ä–≤—ã–π security audit**

### –í —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞

1. **–°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã** (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
4. **–û–±—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∞–≥–µ–Ω—Ç–æ–≤

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–í–æ–ø—Ä–æ—Å—ã?**

- üìñ –°–º. `.github/COPILOT_AGENT_GUIDE.md`
- üêõ –°–æ–∑–¥–∞—Ç—å issue —Å label `documentation`
- üí¨ –û–±—Å—É–¥–∏—Ç—å –≤ Discussions

**–ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≥–µ–Ω—Ç–æ–º?**

- üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `gh run list --workflow=copilot-*`
- üõ†Ô∏è –°–º. —Å–µ–∫—Ü–∏—é Troubleshooting –≤ COPILOT_AGENT_GUIDE.md
- üö® –°–æ–∑–¥–∞—Ç—å issue —Å label `bug`

---

**–í–µ—Ä—Å–∏—è:** 2.0
**–î–∞—Ç–∞:** 14 –¥–µ–∫–∞–±—Ä—è 2025
**–ê–≤—Ç–æ—Ä—ã:** DMarket Bot Team
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
