# ===========================================
# DMarket Telegram Bot - Environment Variables
# ===========================================
# Скопируйте этот файл как .env и заполните значения

# -------------------------------------------
# Telegram Bot Configuration
# -------------------------------------------
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
# Получите токен у @BotFather в Telegram

# -------------------------------------------
# DMarket API Configuration
# -------------------------------------------
DMARKET_PUBLIC_KEY=your_dmarket_public_key_here
DMARKET_SECRET_KEY=your_dmarket_secret_key_here
# Получите ключи в настройках DMarket API
# https://dmarket.com/account/api-settings

DMARKET_API_URL=https://api.dmarket.com
# Базовый URL DMarket API (обычно не требует изменений)

# -------------------------------------------
# Database Configuration
# -------------------------------------------
DATABASE_URL=sqlite:///bot_database.db
# SQLite (для разработки):
# DATABASE_URL=sqlite:///bot_database.db

# PostgreSQL (для production):
# DATABASE_URL=postgresql://username:password@localhost:5432/dmarket_bot

# -------------------------------------------
# Redis Configuration (опционально)
# -------------------------------------------
REDIS_URL=redis://localhost:6379/0
# Используется для кэширования и rate limiting

# -------------------------------------------
# Logging Configuration
# -------------------------------------------
LOG_LEVEL=INFO
# Доступные уровни: DEBUG, INFO, WARNING, ERROR, CRITICAL

LOG_FORMAT=json
# Формат логов: json, text

# -------------------------------------------
# Application Settings
# -------------------------------------------
ENVIRONMENT=development
# Режим работы: development, production

DEBUG=false
# Включить режим отладки (true/false)

# -------------------------------------------
# Trading Safety Mode
# -------------------------------------------
DRY_RUN=true
# ⚠️  КРИТИЧЕСКИ ВАЖНО! ⚠️
# DRY_RUN=true  - Бот НЕ будет совершать реальные сделки (безопасный режим)
# DRY_RUN=false - Бот БУДЕТ совершать реальные сделки на ваш баланс!
#
# РЕКОМЕНДАЦИЯ: Всегда начинайте с DRY_RUN=true и тестируйте бота
# минимум 48-72 часа перед переключением на реальную торговлю!

# -------------------------------------------
# Auto-Buy Configuration (Автопокупка)
# -------------------------------------------
AUTO_BUY_ENABLED=false
# ⚠️  ВКЛЮЧАЕТ АВТОМАТИЧЕСКУЮ ПОКУПКУ! ⚠️
# true  - Бот будет автоматически покупать предметы, соответствующие критериям
# false - Бот только показывает находки, не покупает (режим мониторинга)

MIN_DISCOUNT=15.0
# Минимальная скидка от рыночной цены для автопокупки (%)
# 10.0 = покупать если цена на 10%+ ниже рыночной
# 30.0 = очень жёсткий фильтр (редко найдёт что-то)

# -------------------------------------------
# Price Sanity Check (Проверка адекватности цен)
# -------------------------------------------
# Максимальный множитель от средней цены (1.5 = макс. +50%)
MAX_PRICE_MULTIPLIER=1.5

# Количество дней для анализа истории цен
PRICE_HISTORY_DAYS=7

# Минимальное количество записей истории для расчета средней
MIN_HISTORY_SAMPLES=3

# Включить проверку адекватности цен перед покупкой
ENABLE_PRICE_SANITY_CHECK=true

# -------------------------------------------
# GitHub Actions Integration
# -------------------------------------------
# GITHUB_TOKEN автоматически предоставляется в GitHub Actions
# Локально можно использовать Personal Access Token для избежания rate limit
GITHUB_TOKEN=
# Получите токен здесь: https://github.com/settings/tokens
# Требуемые разрешения: repo (для приватных репозиториев)

# -------------------------------------------
# Codecov Integration (опционально)
# -------------------------------------------
CODECOV_TOKEN=
# Токен для загрузки отчетов о покрытии
# Получите здесь: https://codecov.io/

# -------------------------------------------
# Security Settings
# -------------------------------------------
# Encryption key for sensitive data (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
ENCRYPTION_KEY=

# Allowed user IDs (comma-separated)
ALLOWED_USERS=

# Admin user IDs (comma-separated)
ADMIN_USERS=

# -------------------------------------------
# Waxpeer P2P Integration (для CS2)
# -------------------------------------------
WAXPEER_ENABLED=false
# Включить интеграцию с Waxpeer для перепродажи CS2 скинов

WAXPEER_API_KEY=
# API ключ Waxpeer - получите на https://waxpeer.com/settings
# ВАЖНО: Держите ключ в секрете! Любой с доступом может управлять вашими лотами

# Настройки наценок
WAXPEER_MARKUP=10
# Наценка по умолчанию для обычных скинов (%)

WAXPEER_RARE_MARKUP=25
# Наценка для редких скинов (Low Float, редкие стикеры) (%)

WAXPEER_ULTRA_MARKUP=40
# Наценка для JACKPOT скинов (Katowice 2014 Holo, Ruby/Sapphire) (%)

WAXPEER_MIN_PROFIT=5
# Минимальная прибыль для листинга (%)

# Авто-репрайсинг
WAXPEER_REPRICE=true
# Включить автоматический undercut конкурентов

WAXPEER_REPRICE_INTERVAL=30
# Интервал проверки цен конкурентов (минуты)

# Shadow Listing
WAXPEER_SHADOW=true
# Умное ценообразование: ждать пока дешевые лоты раскупят

WAXPEER_SCARCITY=3
# Порог дефицита (если < N предметов на рынке - увеличить цену)

# Auto-Hold для редких вещей
WAXPEER_AUTO_HOLD=true
# Не выставлять JACKPOT предметы на автопродажу

WAXPEER_ALERT=true
# Отправлять Telegram уведомление при нахождении редкого предмета

# -------------------------------------------
# Trading Settings (опционально)
# -------------------------------------------
# Максимальная сумма одной сделки (USD)
MAX_TRADE_VALUE=50.0

# Дневной лимит торговли (USD)
DAILY_LIMIT=500.0

# Минимальный процент прибыли для арбитража
MIN_PROFIT_PERCENT=5.0

# -------------------------------------------
# Rate Limiting
# -------------------------------------------
# API rate limit (requests per minute)
RATE_LIMIT_PER_MINUTE=30

# Порог для предупреждения о приближении к лимиту (0.0-1.0, рекомендуется 0.9)
RATE_LIMIT_WARNING_THRESHOLD=0.9

# Включить уведомления о rate limit (true/false)
RATE_LIMIT_NOTIFICATIONS=true

# Базовая задержка для exponential backoff (секунды)
RATE_LIMIT_BASE_DELAY=1.0

# Максимальное время backoff (секунды)
RATE_LIMIT_MAX_BACKOFF=60.0

# Максимум попыток повтора при 429 ошибке
RATE_LIMIT_MAX_ATTEMPTS=5

# -------------------------------------------
# Testing Configuration
# -------------------------------------------
# Флаг режима тестирования
TESTING=false

# Тестовая база данных (используется в тестах)
TEST_DATABASE_URL=sqlite:///:memory:

# -------------------------------------------
# Monitoring & Alerts (опционально)
# -------------------------------------------
# Sentry DSN для отслеживания ошибок
SENTRY_DSN=

# Telegram chat ID для уведомлений администратора
ADMIN_TELEGRAM_CHAT_ID=

# Версия бота для отслеживания релизов в Sentry
BOT_VERSION=1.0.0
SENTRY_RELEASE=1.0.0

# Окружение для Sentry (development, production)
SENTRY_ENVIRONMENT=production

# -------------------------------------------
# Arbitrage Notifications (Уведомления об арбитраже)
# -------------------------------------------
# Включить уведомления о найденных сделках
NOTIFICATIONS_ENABLED=true

# Минимальный ROI для отправки уведомления (%)
ALERT_MIN_ROI=15.0

# Chat ID для получения уведомлений (ваш личный ID)
# Узнайте свой ID у @userinfobot в Telegram
TELEGRAM_CHAT_ID=

# Уведомлять только о покупках (не о сканировании)
NOTIFY_PURCHASES_ONLY=false

# Включить звуковые уведомления (если поддерживается)
ENABLE_SOUND_NOTIFICATIONS=true

# -------------------------------------------
# WebSocket Configuration
# -------------------------------------------
# WebSocket URL для real-time данных
WEBSOCKET_URL=wss://api.dmarket.com/ws

# -------------------------------------------
# Cache Settings
# -------------------------------------------
# TTL для кэша в секундах
CACHE_TTL=300

# Включить кэширование (true/false)
ENABLE_CACHE=true

# -------------------------------------------
# Daily Report Configuration
# -------------------------------------------
# Включить автоматические ежедневные отчеты (true/false)
DAILY_REPORT_ENABLED=true

# Час отправки отчета (0-23, UTC)
DAILY_REPORT_HOUR=9

# Минута отправки отчета (0-59)
DAILY_REPORT_MINUTE=0

# Количество дней для включения в отчет (1-30)
DAILY_REPORT_DAYS=1

# -------------------------------------------
# AI/ML Training Configuration (January 2026)
# -------------------------------------------
# Включить обучение AI на реальных ценах
AI_TRAINING_ENABLED=true

# Количество образцов по умолчанию для /ai_train_real
AI_DEFAULT_SAMPLES=500

# Минимальная цена для включения в обучение (USD)
AI_MIN_PRICE=0.50

# Максимальная цена для включения в обучение (USD)
AI_MAX_PRICE=1000.0

# Включить обучение на ликвидных предметах
AI_LIQUID_ENABLED=true

# Порог ликвидности (0-100)
AI_LIQUIDITY_THRESHOLD=50

# Минимум предложений на DMarket для включения
AI_MIN_OFFERS_DMARKET=3

# Минимум предложений на Waxpeer для включения
AI_MIN_OFFERS_WAXPEER=5

# Бонус ликвидности для предметов из Whitelist
AI_WHITELIST_BONUS=25

# Порог для предметов из Whitelist (ниже стандартного)
AI_WHITELIST_THRESHOLD=40

# Использовать Waxpeer API для проверки ликвидности
AI_USE_WAXPEER=true

# Использовать Steam Market для проверки ликвидности
AI_USE_STEAM=true

# Защита от галлюцинаций AI (нереалистичных прогнозов)
AI_HALLUCINATION_PROTECTION=true

# Максимальный прогнозируемый профит (%)
AI_MAX_PROFIT=40

# Порог Z-score для определения выбросов
AI_OUTLIER_ZSCORE=3.0

# Путь к файлу истории рынка
AI_MARKET_HISTORY=data/market_history.csv

# Путь к файлу ликвидных предметов
AI_LIQUID_ITEMS=data/liquid_items.csv

# Путь к обученной модели
AI_MODEL_PATH=data/price_model.pkl

# -------------------------------------------
# Webhook Configuration (Roadmap Task #1)
# -------------------------------------------
# Режим работы бота: webhook (production) или polling (development)
# Webhook обеспечивает мгновенные уведомления и лучшую производительность

# Публичный URL для webhook (HTTPS обязателен!)
# Пример: https://bot.example.com
WEBHOOK_URL=

# Порт для webhook сервера (рекомендуется: 8443, 443, 80, 88)
WEBHOOK_PORT=8443

# Адрес для прослушивания (обычно 0.0.0.0 для Docker)
WEBHOOK_LISTEN=0.0.0.0

# URL путь для webhook (будет добавлен к WEBHOOK_URL)
WEBHOOK_PATH=telegram-webhook

# Путь к SSL сертификату (опционально, для self-signed)
# Если используете Nginx/Caddy с SSL, оставьте пустым
WEBHOOK_CERT=

# Путь к SSL ключу (опционально)
WEBHOOK_KEY=

# Секретный токен для валидации webhook запросов (опционально, auto-generated)
# Рекомендуется установить для дополнительной безопасности
WEBHOOK_SECRET=

# Максимальное количество одновременных соединений (1-100)
WEBHOOK_MAX_CONNECTIONS=100

# Принудительно использовать polling вместо webhook (для локальной разработки)
# true - использовать polling, false/пусто - использовать webhook если настроен
USE_POLLING=false

# ===========================================
# End of Configuration
# ===========================================
