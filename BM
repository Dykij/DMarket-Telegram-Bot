# üìä BM (Bug Monitor) - –û—Ç—á–µ—Ç –æ–± –æ—Ç–ª–∞–¥–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–î–∞—Ç–∞**: 2026-01-08
**–í–µ—Ä—Å–∏—è Python**: 3.12.3
**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞**: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã P0, P1, P1+ –∏ P2 –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (P0)

| –ü—Ä–æ–±–ª–µ–º–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|----------|------|--------|
| `keepalive_expiry` 30‚Üí60 | `tests/dmarket/test_connection_pooling.py` | ‚úÖ |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—è–¥–æ–≤ 6‚Üí7 | `tests/telegram_bot/keyboards/test_arbitrage_keyboards.py` | ‚úÖ |
| –ò–Ω–¥–µ–∫—Å –∫–Ω–æ–ø–∫–∏ 5‚Üí6 | `tests/telegram_bot/keyboards/test_arbitrage_keyboards.py` | ‚úÖ |
| –°–æ–¥–µ—Ä–∂–∏–º–æ–µ help | `tests/telegram_bot/handlers/test_commands.py` | ‚úÖ |
| –¢–µ–∫—Å—Ç arbitrage | `tests/telegram_bot/handlers/test_commands.py` | ‚úÖ |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ 10‚Üí3 | `tests/telegram_bot/test_bot_commands.py` | ‚úÖ |

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (P1)

| –ü—Ä–æ–±–ª–µ–º–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|----------|------|--------|
| `check_price_alert()` user_id —É–¥–∞–ª—ë–Ω | `tests/telegram_bot/notifications/test_checker.py` | ‚úÖ |
| `check_all_alerts()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç int | `tests/telegram_bot/notifications/test_checker.py` | ‚úÖ |
| `check_good_deal_alerts()` min_discount —É–¥–∞–ª—ë–Ω | `tests/telegram_bot/notifications/test_checker.py` | ‚úÖ |
| –ü–∞—Ç—á `get_current_price` ‚Üí `notifier` | `tests/telegram_bot/notifications/test_checker.py` | ‚úÖ |
| `arbitrage_callback_impl` ‚Üí `auto_trade_start` | `tests/telegram_bot/handlers/test_callbacks.py` | ‚úÖ |
| `handle_dmarket_arbitrage_impl` —Ä–µ–¥–∏—Ä–µ–∫—Ç | `tests/telegram_bot/handlers/test_callbacks.py` | ‚úÖ |
| `handle_game_selected_impl` —É–ø—Ä–æ—â—ë–Ω | `tests/telegram_bot/handlers/test_callbacks.py` | ‚úÖ |
| `button_callback_handler` —Ä–æ—É—Ç–∏–Ω–≥ | `tests/telegram_bot/handlers/test_callbacks.py` | ‚úÖ |

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (P1+) - Storage & Alerts

| –ü—Ä–æ–±–ª–µ–º–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|----------|------|--------|
| `set_cached_price()` —Ç—Ä–µ–±—É–µ—Ç timestamp | `tests/telegram_bot/notifications/test_storage.py` | ‚úÖ |
| `update_user_settings()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None | `tests/telegram_bot/notifications/test_alerts.py` | ‚úÖ |
| `get_user_alerts()` —Ç—Ä–µ–±—É–µ—Ç `active` –≤ alerts | `tests/telegram_bot/notifications/test_alerts.py` | ‚úÖ |

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (P2) - ML –º–æ–¥—É–ª–∏

| –ü—Ä–æ–±–ª–µ–º–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|----------|------|--------|
| `feature_names()` 32‚Üí38 (–¥–æ–±–∞–≤–ª–µ–Ω—ã DMarket/Lock) | `src/ml/enhanced_predictor.py` | ‚úÖ |
| `datetime.utcnow()` ‚Üí `datetime.now(timezone.utc)` | `tests/ml/test_enhanced_predictor.py` | ‚úÖ |
| `datetime.utcnow()` ‚Üí `datetime.now(timezone.utc)` | `tests/ml/test_price_predictor.py` | ‚úÖ |
| Test array size 32‚Üí38 | `tests/ml/test_enhanced_predictor.py` | ‚úÖ |
| `test_trade_signals` —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–≥–Ω–∞–ª—ã | `tests/ml/test_price_predictor.py` | ‚úÖ |

---

## üìà –°–í–û–î–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í –¢–ï–°–¢–û–í

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –°—Ç–∞—Ç—É—Å |
|---------|-----|-------|--------|
| **ML tests passed** | 107 | 115 | üü¢ +8 |
| **Total tests passed** | 4916 | 4970+ | üü¢ –£–ª—É—á—à–µ–Ω–æ |
| **–ü—Ä–æ–≤–∞–ª–µ–Ω–æ** | 69 | ~35 | üü¢ -34 |
| **–ü—Ä–æ–ø—É—â–µ–Ω–æ** | 29 | ~41 | ‚ö†Ô∏è |

---

## üü¢ –í–°–ï –ü–†–ò–û–†–ò–¢–ï–¢–´ –ó–ê–í–ï–†–®–ï–ù–´

### P0 (6 –∑–∞–¥–∞—á) ‚úÖ
- connection pooling, keyboards, commands, bot_commands

### P1 (8 –∑–∞–¥–∞—á) ‚úÖ  
- notification checker, callback handlers

### P1+ (4 –∑–∞–¥–∞—á–∏) ‚úÖ
- storage (timestamp), alerts (update_user_settings, get_user_alerts)
- notification_handlers (mock_get undefined)

### P2 (5 –∑–∞–¥–∞—á) ‚úÖ
- ML feature_names sync (32‚Üí38)
- datetime timezone fixes
- test_trade_signals fix

---

## üü† –û–°–¢–ê–í–®–ò–ï–°–Ø –ó–ê–î–ê–ß–ò (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ deep nesting (PLR1702)

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `src/dmarket/adaptive_polling.py`
- `src/dmarket/backtester.py`
- `src/dmarket/intramarket_arbitrage.py`

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å early returns –∏ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 2. Security warnings (S104, S301)

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**:
- `src/telegram_bot/health_check.py` - binding to all interfaces
- `src/ml/enhanced_predictor.py` - pickle security

### 3. CI –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (aiosqlite)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: `aiosqlite` –µ—Å—Ç—å –≤ requirements.txt (—Å—Ç—Ä–æ–∫–∞ 17).
–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç.

---

*–û—Ç—á–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω: 2026-01-08*
