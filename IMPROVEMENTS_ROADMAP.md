# üîß –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π DMarket Telegram Bot

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 30 –¥–µ–∫–∞–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** ‚ö†Ô∏è –ù–ï –≥–æ—Ç–æ–≤ –∫ production
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ –í–´–°–û–ö–ê–Ø

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã-–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)
2. [–í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (1 –Ω–µ–¥–µ–ª—è)](#–≤–∞–∂–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã-1-–Ω–µ–¥–µ–ª—è)
3. [–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (2-4 –Ω–µ–¥–µ–ª–∏)](#—Å—Ä–µ–¥–Ω–∏–π-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-2-4-–Ω–µ–¥–µ–ª–∏)
4. [–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (backlog)](#–Ω–∏–∑–∫–∏–π-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-backlog)
5. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π-–¥–æ–ª–≥)
6. [–ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production](#—á–µ–∫-–ª–∏—Å—Ç-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏-–∫-production)

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

### 1. ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û
**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps/Backend
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (30.12.2025)

**–ü—Ä–æ–±–ª–µ–º–∞:**

```
ModuleNotFoundError: No module named 'circuitbreaker'
ModuleNotFoundError: No module named 'nacl'
```

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω circuitbreaker –∏ PyNaCl —á–µ—Ä–µ–∑ poetry
poetry add PyNaCl circuitbreaker

# 2. –û–±–Ω–æ–≤–ª–µ–Ω pyproject.toml —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
# 3. –ü–µ—Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
poetry install --no-root

# 4. –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
poetry run pytest tests/ --co
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ `pyproject.toml` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
- ‚úÖ 8004 —Ç–µ—Å—Ç–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (90 —Å –æ—à–∏–±–∫–∞–º–∏ –∏–º–ø–æ—Ä—Ç–∞ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π)
- ‚úÖ 167 —Ç–µ—Å—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ (analytics + filters)

---

### 2. ‚úÖ –¢–µ—Å—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è (–ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù–û)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û
**–í—Ä–µ–º—è:** 1-2 —á–∞—Å–∞
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA/Backend
**–°—Ç–∞—Ç—É—Å:** üü° –í –ü–†–û–¶–ï–°–°–ï (30.12.2025)

**–ü—Ä–æ–±–ª–µ–º–∞:**

- 0 –∏–∑ 2348 —Ç–µ—Å—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –∏–∑–º–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- –ó–∞—è–≤–ª–µ–Ω–Ω—ã–µ 85% –ø–æ–∫—Ä—ã—Ç–∏—è –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–º. –ø.1)
poetry add PyNaCl circuitbreaker

# 2. –£—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã
poetry run pytest tests/analytics/ tests/dmarket/filters/ -v --cov

# 3. –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–æ–∫—Ä—ã—Ç–∏–µ (167 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ)
Coverage: 2.26% (21393 –Ω–µ –ø–æ–∫—Ä—ã—Ç–æ, 493 –ø–æ–∫—Ä—ã—Ç–æ)
```

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**

- ‚úÖ 8004 —Ç–µ—Å—Ç–∞ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (–±—ã–ª–æ 0)
- ‚ö†Ô∏è 90 —Ç–µ—Å—Ç–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏ –∏–º–ø–æ—Ä—Ç–∞ (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏)
- ‚úÖ 167 —Ç–µ—Å—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ (analytics + filters)
- ‚ö†Ô∏è –†–µ–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: ~2.26% (–Ω–µ 85% –∫–∞–∫ –∑–∞—è–≤–ª–µ–Ω–æ)
- ‚úÖ Coverage report –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–û—Å—Ç–∞–≤—à–∞—è—Å—è —Ä–∞–±–æ—Ç–∞:**

- –ò—Å–ø—Ä–∞–≤–∏—Ç—å 90 —Ñ–∞–π–ª–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏ –∏–º–ø–æ—Ä—Ç–∞
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤
- –ü–æ–≤—ã—Å–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ —Ü–µ–ª–µ–≤—ã—Ö 80-85%

---

### 3. ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (MEDIUM severity) - –í–´–ü–û–õ–ù–ï–ù–û

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û
**–í—Ä–µ–º—è:** 2-3 —á–∞—Å–∞
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Security/Backend
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (30.12.2025)

**–ü—Ä–æ–±–ª–µ–º—ã:**

#### 3.1 ‚úÖ –ë–∏–Ω–¥–∏–Ω–≥ –Ω–∞ –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (0.0.0.0) - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª—ã:**

- `src/telegram_bot/webhook_handler.py:56` ‚úÖ
- `src/utils/prometheus_server.py:47` ‚úÖ

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**

```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
# webhook_handler.py - default host –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ 127.0.0.1
def __init__(self, bot_app, host: str = "127.0.0.1", ...)

# prometheus_server.py - default host –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ 127.0.0.1
def __init__(self, host: str = "127.0.0.1", port: int = 9090)

# –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ config.py:
class BotConfig:
    webhook_host: str = "127.0.0.1"
    webhook_port: int = 8443

class MonitoringConfig:
    prometheus_host: str = "127.0.0.1"
    prometheus_port: int = 9090

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
# WEBHOOK_HOST, WEBHOOK_PORT, PROMETHEUS_HOST, PROMETHEUS_PORT, ENVIRONMENT
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤–∏—Å—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–∏–Ω–¥—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ localhost. –í production —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å 0.0.0.0 –∑–∞ reverse proxy.

#### 3.2 ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pickle –¥–ª—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ - –£–ñ–ï –ë–ï–ó–û–ü–ê–°–ù–û

**–§–∞–π–ª:** `src/utils/redis_cache.py:137`

**–°—Ç–∞—Ç—É—Å:** –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è (orjson)

```python
# ‚úÖ –£–ñ–ï –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è orjson
return orjson.loads(value)  # –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è JSON –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Pickle –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–π orjson

#### 3.3 ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ random –≤–º–µ—Å—Ç–æ secrets - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–§–∞–π–ª—ã:**

- `src/dmarket/market_analysis.py:746` ‚úÖ
- `src/utils/feature_flags.py:167` ‚úÖ
- `src/utils/rate_limiter.py:339` ‚úÖ

**–î–µ–π—Å—Ç–≤–∏—è:**

```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ noqa –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
# Non-cryptographic use - just for simulation/testing
variation = random.uniform(-0.2, 0.2)  # noqa: S311

# Non-cryptographic use - just for feature flag distribution
result = random.randint(0, 99) < rollout  # noqa: S311

# Non-cryptographic use - just for load distribution jitter
jitter_percent = random.uniform(-0.1, 0.1)  # noqa: S311
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** random –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π (—Å–∏–º—É–ª—è—Ü–∏—è, jitter, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏), —á—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ.

**–ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
poetry run bandit -r src/ -ll
# Result: No MEDIUM or HIGH severity issues
# Total: 6 LOW severity (acceptable)
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ Bandit –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç MEDIUM severity –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ö–æ—Å—Ç–æ–≤
- ‚úÖ Redis cache –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é (orjson)
- ‚úÖ random –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (1 –Ω–µ–¥–µ–ª—è)

### 4. Ruff –ª–∏–Ω—Ç–µ—Ä: 400+ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–û
**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend team

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**

- **PLR6301** (80+ —Å–ª—É—á–∞–µ–≤): –ú–µ—Ç–æ–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏—è–º–∏/—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏
- **PT023** (50+ —Å–ª—É—á–∞–µ–≤): `@pytest.mark.asyncio` ‚Üí `@pytest.mark.asyncio()`
- **F401** (30+ —Å–ª—É—á–∞–µ–≤): –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- **W293** (20+ —Å–ª—É—á–∞–µ–≤): –ü—Ä–æ–±–µ–ª—ã –≤ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö

**–î–µ–π—Å—Ç–≤–∏—è:**

#### 4.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
ruff check src/ tests/ --fix

# 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
ruff check src/ tests/ --select F401 --fix

# 3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–µ–ª—ã
ruff check src/ tests/ --select W293 --fix

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å Black
black src/ tests/
```

#### 4.2 –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PLR6301

**–ü—Ä–∏–º–µ—Ä:**

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
class TestArbitrage:
    def test_calculate_profit(self):
        result = calculate_profit(10, 15)
        assert result > 0

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–¥–µ–ª–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º
class TestArbitrage:
    @staticmethod
    def test_calculate_profit():
        result = calculate_profit(10, 15)
        assert result > 0

# ‚úÖ –ò–õ–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å self –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Ñ–∏–∫—Å—Ç—É—Ä—ã
class TestArbitrage:
    def test_calculate_profit(self, mock_api):
        result = calculate_profit(10, 15)
        assert result > 0
```

#### 4.3 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ pytest –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤

**–ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤:**

```bash
grep -r "@pytest.mark.asyncio$" tests/
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
@pytest.mark.asyncio
async def test_api_call():
    pass

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
@pytest.mark.asyncio()
async def test_api_call():
    pass
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

```bash
# –ò—Å–ø–æ–ª—å–∑—É—è sed (Linux/Mac)
find tests/ -name "*.py" -exec sed -i 's/@pytest.mark.asyncio$/@pytest.mark.asyncio()/g' {} +

# –ò—Å–ø–æ–ª—å–∑—É—è PowerShell (Windows)
Get-ChildItem tests\ -Recurse -Filter *.py | ForEach-Object {
    (Get-Content $_.FullName) -replace '@pytest\.mark\.asyncio$', '@pytest.mark.asyncio()' |
    Set-Content $_.FullName
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ `ruff check src/ tests/` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç < 50 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ F (–æ—à–∏–±–∫–∏)
- ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π W293, PT023

---

### 5. MyPy: –û—à–∏–±–∫–∏ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–û
**–í—Ä–µ–º—è:** 2-3 —á–∞—Å–∞
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend

**–ü—Ä–æ–±–ª–µ–º–∞:**

```
src\utils\market_analyzer.py:483:27: error: Value of type variable
"SupportsRichComparisonT" of "max" cannot be "float | floating[Any] | int"
```

**–î–µ–π—Å—Ç–≤–∏—è:**

#### 5.1 –ò—Å–ø—Ä–∞–≤–∏—Ç—å market_analyzer.py:483

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
confidence *= max(1 - volatility * 2, 0.6)

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —è–≤–Ω–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
confidence *= float(max(1 - volatility * 2, 0.6))

# ‚úÖ –ò–õ–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å typing.cast
from typing import cast
confidence *= max(cast(float, 1 - volatility * 2), 0.6)
```

#### 5.2 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã

```bash
mypy src/ --no-error-summary --strict
```

#### 5.3 –î–æ–±–∞–≤–∏—Ç—å type hints –¥–ª—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

```python
# –ü—Ä–∏–º–µ—Ä
def calculate_profit(buy: float, sell: float) -> float:
    """Calculate profit."""
    return sell - buy
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ `mypy src/ --strict` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤
- ‚úÖ CI/CD –ø—Ä–æ–≤–µ—Ä—è–µ—Ç MyPy –≤ strict mode

---

### 6. –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥ (Vulture)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–û
**–í—Ä–µ–º—è:** 1-2 —á–∞—Å–∞
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend

**–ù–∞–π–¥–µ–Ω–æ:** 19 –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö/–∏–º–ø–æ—Ä—Ç–æ–≤

**–î–µ–π—Å—Ç–≤–∏—è:**

#### 6.1 –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã `Notifier`

**–§–∞–π–ª—ã:**

- `src/dmarket/api/client.py:37`
- `src/dmarket/api_validator.py:16`
- `src/dmarket/dmarket_api.py:44`
- `src/utils/rate_limiter.py:10`

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
from src.telegram_bot.notifier import Notifier  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É
```

#### 6.2 –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ exception handlers

**–§–∞–π–ª—ã:**

- `src/dmarket/api/client.py:141-142`
- `src/dmarket/dmarket_api.py:234-235`
- `src/utils/prometheus_metrics.py:294-295`

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
except Exception as e:
    exc_type, exc_val, exc_tb = sys.exc_info()  # exc_val –∏ exc_tb –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
    logger.error(f"Error: {e}")

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å underscore –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
except Exception as e:
    exc_type, _, _ = sys.exc_info()
    logger.error(f"Error: {e}", exc_type=exc_type)

# ‚úÖ –ò–õ–ò –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å
except Exception as e:
    logger.error(f"Error: {e}", exc_info=True)
```

#### 6.3 –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**–°–ø–∏—Å–æ–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**

- `src/dmarket/intramarket_arbitrage.py:40` - similarity_threshold
- `src/interfaces.py:78` - asset_id
- `src/main.py:379` - frame
- `src/models/base.py:19,31` - dialect
- `src/telegram_bot/keyboards/webapp.py:135` - payment_provider_token
- `src/telegram_bot/market_alerts.py:734` - max_age_days
- `src/utils/logging_utils.py:125` - hint
- `src/utils/sentry_integration.py:103` - hint
- `src/utils/state_manager.py:345` - frame

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ `vulture src/ --min-confidence 80` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç < 5 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ Exception handlers –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

### 7. Try-except-pass –±–ª–æ–∫–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–û
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend

**–§–∞–π–ª:** `src/dmarket/api/auth.py:109-110`

**–ü—Ä–æ–±–ª–µ–º–∞:**

```python
try:
    return result
except Exception:
    pass  # ‚ùå –û—à–∏–±–∫–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è
```

**–î–µ–π—Å—Ç–≤–∏–µ:**

```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É
try:
    return result
except Exception as e:
    logger.warning("auth_failed", error=str(e), exc_info=True)
    return None

# ‚úÖ –ò–õ–ò –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
try:
    return result
except ValueError as e:
    logger.error("invalid_value", error=str(e))
    raise AuthenticationError("Invalid credentials") from e
except Exception as e:
    logger.error("unexpected_error", error=str(e), exc_info=True)
    raise
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ Bandit –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç B110 (try-except-pass)
- ‚úÖ –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

---

## üìä –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (2-4 –Ω–µ–¥–µ–ª–∏)

### 8. TODO/FIXME –≤ –∫–æ–¥–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend team

**–§–∞–π–ª—ã —Å TODO:**

- `src/utils/sentry_integration.py`
- `src/telegram_bot/handlers/price_alerts_handler.py`
- `src/containers.py`

**–î–µ–π—Å—Ç–≤–∏—è:**

```bash
# 1. –ù–∞–π—Ç–∏ –≤—Å–µ TODO
grep -rn "TODO\|FIXME\|XXX\|HACK" src/

# 2. –°–æ–∑–¥–∞—Ç—å GitHub Issues –¥–ª—è –∫–∞–∂–¥–æ–≥–æ TODO
# 3. –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ Issues –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

# –ü—Ä–∏–º–µ—Ä:
# TODO: Implement caching
# –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
# TODO(#123): Implement caching - https://github.com/user/repo/issues/123
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ –í—Å–µ TODO –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ Issues
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ TODO —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ù–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ TODO –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –≤ backlog

---

### 9. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ—Ç—Ä–∏–∫ –ø–æ–∫—Ä—ã—Ç–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 2-3 —á–∞—Å–∞
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA/DevOps

**–ü—Ä–æ–±–ª–µ–º–∞:**

- `coverage.json` –∏–º–µ–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –ó–∞—è–≤–ª–µ–Ω–Ω—ã–µ 85% –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã

**–î–µ–π—Å—Ç–≤–∏—è:**

#### 9.1 –ò—Å–ø—Ä–∞–≤–∏—Ç—å coverage.json

```bash
# 1. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
rm coverage.json coverage.xml

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∑–∞–Ω–æ–≤–æ
pytest tests/ --cov=src --cov-report=json --cov-report=xml --cov-report=html

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
python -c "import json; print(json.load(open('coverage.json'))['totals'])"
```

#### 9.2 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

```yaml
# .github/workflows/tests.yml
- name: Run tests with coverage
  run: |
    pytest tests/ --cov=src --cov-report=xml --cov-report=term

- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v4
  with:
    file: ./coverage.xml
    fail_ci_if_error: true

- name: Check coverage threshold
  run: |
    coverage report --fail-under=80
```

#### 9.3 –î–æ–±–∞–≤–∏—Ç—å coverage badge –≤ README

```markdown
[![codecov](https://codecov.io/gh/Dykij/DMarket-Telegram-Bot/branch/main/graph/badge.svg)](https://codecov.io/gh/Dykij/DMarket-Telegram-Bot)
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ coverage.json –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ CI/CD –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º PR
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ >= 80%
- ‚úÖ Badge –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ README

---

### 10. Radon –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 1 —á–∞—Å
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps

**–ü—Ä–æ–±–ª–µ–º–∞:**

```
ValueError: invalid interpolation syntax in pyproject.toml
```

**–î–µ–π—Å—Ç–≤–∏—è:**

#### 10.1 –ò—Å–ø—Ä–∞–≤–∏—Ç—å pyproject.toml

```toml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –≤ —Å—Ç—Ä–æ–∫–∞—Ö
[tool.pytest.ini_options]
markers = [
    "slow: Marks tests as slow (deselect with '-m \"not slow\"')",
]

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–∞–≤—ã—á–∫–∏
[tool.pytest.ini_options]
markers = [
    "slow: Marks tests as slow (deselect with -m 'not slow')",
]
```

#### 10.2 –ó–∞–ø—É—Å—Ç–∏—Ç—å Radon

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
radon cc src/ -a -s

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
radon mi src/ -s

# –ü—Ä–æ–≤–µ—Ä–∫–∞ raw –º–µ—Ç—Ä–∏–∫
radon raw src/ -s
```

#### 10.3 –î–æ–±–∞–≤–∏—Ç—å CI/CD –ø—Ä–æ–≤–µ—Ä–∫—É

```yaml
# .github/workflows/code-quality.yml
- name: Check code complexity
  run: |
    radon cc src/ -a -nc
    radon mi src/ -nb
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ Radon –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å < B (10)
- ‚úÖ –ò–Ω–¥–µ–∫—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ > 20
- ‚úÖ CI/CD –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

### 11. –£–ª—É—á—à–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°–†–ï–î–ù–ò–ô
**–í—Ä–µ–º—è:** 8-12 —á–∞—Å–æ–≤
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA team

**–î–µ–π—Å—Ç–≤–∏—è:**

#### 11.1 –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—ã –≤ conftest.py

```python
# tests/conftest.py
import pytest
from unittest.mock import AsyncMock

@pytest.fixture
def mock_dmarket_api():
    """Mock DMarket API client."""
    api = AsyncMock()
    api.get_balance.return_value = {"usd": "10000"}
    return api

@pytest.fixture
async def test_db():
    """Test database fixture."""
    # Setup
    db = await create_test_database()
    yield db
    # Teardown
    await db.close()
```

#### 11.2 –î–æ–±–∞–≤–∏—Ç—å pytest markers

```python
# pyproject.toml
[tool.pytest.ini_options]
markers = [
    "unit: Quick unit tests",
    "integration: Integration tests",
    "slow: Slow tests",
    "smoke: Smoke tests",
]
```

#### 11.3 –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

```
tests/
‚îú‚îÄ‚îÄ unit/           # –ë—ã—Å—Ç—Ä—ã–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ integration/    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ e2e/           # End-to-end —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ performance/   # –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

**–ö—Ä–∏—Ç–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- ‚úÖ –¢–µ—Å—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã: `pytest -m unit`
- ‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è unit —Ç–µ—Å—Ç–æ–≤ < 30 —Å–µ–∫
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ unit —Ç–µ—Å—Ç–∞–º–∏ >= 70%

---

## üìâ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (backlog)

### 12. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üîµ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 1-2 –Ω–µ–¥–µ–ª–∏

**–î–µ–π—Å—Ç–≤–∏—è:**

- –î–æ–±–∞–≤–∏—Ç—å connection pooling –¥–ª—è Redis
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `explain analyze`)
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batch processing –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

---

### 13. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üîµ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 1-2 –Ω–µ–¥–µ–ª–∏

**–î–µ–π—Å—Ç–≤–∏—è:**

- –û–±–Ω–æ–≤–∏—Ç—å README —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- –°–æ–∑–¥–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (C4 model)

---

### 14. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üîµ –ù–ò–ó–ö–ò–ô
**–í—Ä–µ–º—è:** 1 –Ω–µ–¥–µ–ª—è

**–î–µ–π—Å—Ç–≤–∏—è:**

- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus metrics –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –î–æ–±–∞–≤–∏—Ç—å distributed tracing (Jaeger/Zipkin)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –≤ Sentry –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –≤ Grafana
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ (—É—Å–ø–µ—à–Ω—ã–µ —Å–¥–µ–ª–∫–∏, –ø—Ä–æ—Ñ–∏—Ç)

---

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- [ ] –†–∞–∑–¥–µ–ª–∏—Ç—å `dmarket_api.py` –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π (1500+ —Å—Ç—Ä–æ–∫)
- [ ] –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–∑ handlers –≤ services
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Repository pattern –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- [ ] –î–æ–±–∞–≤–∏—Ç—å Domain-Driven Design —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### –ö–æ–¥

- [ ] –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (DRY principle)
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (> 50 —Å—Ç—Ä–æ–∫)
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (> 3 —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏)
- [ ] –î–æ–±–∞–≤–∏—Ç—å type aliases –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤

### –¢–µ—Å—Ç—ã

- [ ] –î–æ–±–∞–≤–∏—Ç—å property-based testing (Hypothesis)
- [ ] –î–æ–±–∞–≤–∏—Ç—å contract testing (Pact)
- [ ] –î–æ–±–∞–≤–∏—Ç—å mutation testing (mutmut)
- [ ] –î–æ–±–∞–≤–∏—Ç—å snapshot testing

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting –Ω–∞ –≤—Å–µ API endpoints
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å RBAC (Role-Based Access Control)
- [ ] –î–æ–±–∞–≤–∏—Ç—å audit logging
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ security audit (penetration testing)

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production

### –ö—Ä–∏—Ç–∏—á–Ω–æ (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–ª–∏–∑)

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç (>95%)
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ >= 80%
- [ ] –ù–µ—Ç CRITICAL/HIGH security –ø—Ä–æ–±–ª–µ–º
- [ ] –ù–µ—Ç MEDIUM security –ø—Ä–æ–±–ª–µ–º –≤ production –∫–æ–¥–µ
- [ ] CI/CD pipeline —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [ ] Environment variables –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ –∫–æ–¥–µ (vault/env)

### –í–∞–∂–Ω–æ

- [ ] Ruff –ª–∏–Ω—Ç–µ—Ä < 50 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- [ ] MyPy strict mode –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥ —É–¥–∞–ª—ë–Ω
- [ ] TODO/FIXME –∏–º–µ—é—Ç Issues
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ >= 85%
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã < 5 –º–∏–Ω—É—Ç
- [ ] Cyclomatic complexity < B (10)
- [ ] Maintainability Index > 20
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
- [ ] Performance —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (30.12.2025)

```
‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: 40%

üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:  7 / 7  (0% —Ä–µ—à–µ–Ω–æ)
üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:       4 / 7  (43% —Ä–µ—à–µ–Ω–æ)
üü¢ –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:      0 / 4  (0% —Ä–µ—à–µ–Ω–æ)
üîµ –ù–∏–∑–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:       0 / 3  (0% —Ä–µ—à–µ–Ω–æ)

üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:
- –¢–µ—Å—Ç—ã: 0 / 2348 –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è (0%)
- –ü–æ–∫—Ä—ã—Ç–∏–µ: ? / 85% (–Ω–µ –∏–∑–º–µ—Ä–µ–Ω–æ)
- Ruff: 400+ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- MyPy: –µ—Å—Ç—å –æ—à–∏–±–∫–∏
- Security: 11 –ø—Ä–æ–±–ª–µ–º (2 MEDIUM)
```

### –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production: 100%

üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:  0
üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:       0
üü¢ –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:      –≤ backlog
üîµ –ù–∏–∑–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:       –≤ backlog

üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:
- –¢–µ—Å—Ç—ã: 2348 / 2348 (100%)
- –ü–æ–∫—Ä—ã—Ç–∏–µ: 85%+
- Ruff: < 10 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- MyPy: 0 –æ—à–∏–±–æ–∫ (strict mode)
- Security: 0 CRITICAL/HIGH/MEDIUM
```

---

## üìÖ –í—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

| –≠—Ç–∞–ø                        | –í—Ä–µ–º—è      | –î–µ–¥–ª–∞–π–Ω    |
| --------------------------- | ---------- | ---------- |
| **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**    | 1 –¥–µ–Ω—å     | 31.12.2025 |
| **–í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**         | 5-7 –¥–Ω–µ–π   | 06.01.2026 |
| **–°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**        | 2-4 –Ω–µ–¥–µ–ª–∏ | 27.01.2026 |
| **–ù–∏–∑–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**         | backlog    | TBD        |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production** | 4-6 –Ω–µ–¥–µ–ª—å | 10.02.2026 |

---

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ 24 —á–∞—Å–∞

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (30.12.2025 11:00-13:00)

1. ‚úÖ **11:00-11:10** - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å circuitbreaker –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. ‚úÖ **11:10-11:30** - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –ø–æ–ª—É—á–∏—Ç—å baseline metrics
3. ‚úÖ **11:30-12:00** - –ò—Å–ø—Ä–∞–≤–∏—Ç—å security –ø—Ä–æ–±–ª–µ–º—ã (pickle ‚Üí orjson)
4. ‚úÖ **12:00-12:30** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Ruff (--fix)
5. ‚úÖ **12:30-13:00** - –ò—Å–ø—Ä–∞–≤–∏—Ç—å pytest –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (100+ —Ñ–∞–π–ª–æ–≤)

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (13:00-18:00)

1. ‚è≥ **13:00-14:00** - –û–±–µ–¥
2. ‚è≥ **14:00-15:00** - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 90 –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞
3. ‚è≥ **15:00-16:00** - –ò—Å–ø—Ä–∞–≤–∏—Ç—å MyPy –æ—à–∏–±–∫–∏
4. ‚è≥ **16:00-17:00** - –£–¥–∞–ª–∏—Ç—å –º—ë—Ä—Ç–≤—ã–π –∫–æ–¥ (Vulture)
5. ‚è≥ **17:00-18:00** - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç suite –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å coverage

**–¶–µ–ª—å –¥–Ω—è:** ~~–†–µ—à–∏—Ç—å –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã~~ ‚Üí 67% –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–æ ‚úÖ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ

- **Backend lead:** TBD
- **QA lead:** TBD
- **DevOps:** TBD
- **Security:** TBD

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 30 –¥–µ–∫–∞–±—Ä—è 2025
**–ê–≤—Ç–æ—Ä:** GitHub Copilot CLI (automated audit)
