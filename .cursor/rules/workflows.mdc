---
description: "GitHub Actions workflow standards"
globs: [".github/workflows/**/*.yml", ".github/workflows/**/*.yaml"]
alwaysApply: true
---

# GitHub Actions Workflow Rules

## YAML Syntax
- Quote `on:` as `"on":` to avoid YAML truthy issues
- Keep lines under 120 characters
- Use YAML anchors for repeated configuration

## Structure
- Define `name:` at the top
- Use `env:` for shared variables
- Set `timeout-minutes` for all jobs
- Use `concurrency` to cancel duplicate runs

## Actions
- Pin major versions: `actions/checkout@v6`
- Use caching: `actions/setup-python` with `cache: 'pip'`
- Upload artifacts for debugging

## Python Jobs
- Use matrix for multiple Python versions
- Install dependencies in separate step
- Create `.env` file for test configuration
- Set `PYTHONPATH` environment variable

## Security
- Never hardcode secrets
- Use `${{ secrets.* }}` for sensitive data
- Limit permissions with `permissions:` block
- Use `continue-on-error: true` carefully

## Best Practices
- Use `if: always()` for cleanup jobs
- Generate job summaries with `$GITHUB_STEP_SUMMARY`
- Use `needs:` for job dependencies
- Fail fast with `fail-fast: false` when debugging
