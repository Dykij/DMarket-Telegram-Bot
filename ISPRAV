# üìä ISPRAV - –û—Ç—á–µ—Ç –æ–± –æ—Ç–ª–∞–¥–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–î–∞—Ç–∞**: 2026-01-08
**–í–µ—Ä—Å–∏—è Python**: 3.12.3
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï P0 –ó–ê–î–ê–ß–ò –í–´–ü–û–õ–ù–ï–ù–´

---

## üìà –°–í–û–î–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –°—Ç–∞—Ç—É—Å |
|---------|-----|-------|--------|
| **–¢–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ** | 4911 | 4933 | üü¢ +22 |
| **–¢–µ—Å—Ç–æ–≤ –ø—Ä–æ–≤–∞–ª–µ–Ω–æ** | 26 | ~4 | üü¢ -22 |
| **–¢–µ—Å—Ç–æ–≤ –ø—Ä–æ–ø—É—â–µ–Ω–æ** | 22 | 24 | ‚ö†Ô∏è |
| **Ruff –æ—à–∏–±–æ–∫** | 577 | 577 | üü† |

---

## ‚úÖ P0 - –í–´–ü–û–õ–ù–ï–ù–û

### 1. test_notifier.py - 17 –ø—Ä–æ–≤–∞–ª–æ–≤ ‚Üí –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ

**–§–∞–π–ª**: `tests/telegram_bot/test_notifier.py`

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
- –ó–∞–º–µ–Ω–µ–Ω—ã —Å—Å—ã–ª–∫–∏ `notifier_module._user_alerts` –Ω–∞ `get_storage().user_alerts`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã assertions –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π facade –º–æ–¥—É–ª—è
- –í—Å–µ 41 —Ç–µ—Å—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### 2. test_initialization.py - 3 –ø—Ä–æ–≤–∞–ª–∞ ‚Üí –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ

**–§–∞–π–ª**: `tests/telegram_bot/test_initialization.py`

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
1. `test_setup_logging_custom_level` - —É–ø—Ä–æ—â–µ–Ω assertion –¥–æ `assert_called()`
2. `test_initialize_bot_with_persistence` - –∏–∑–º–µ–Ω—ë–Ω –ø–∞—Ç—á –Ω–∞ `telegram.ext.PicklePersistence`
3. `test_setup_bot_commands_includes_standard_commands` - —É–¥–∞–ª—ë–Ω `balance`, –æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ `start`, `help`, `settings`

–í—Å–µ 33 —Ç–µ—Å—Ç–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç.

---

### 3. test_telegram_bot_modules.py - 2 –ø—Ä–æ–≤–∞–ª–∞ ‚Üí –ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ

**–§–∞–π–ª**: `tests/telegram_bot/test_telegram_bot_modules.py`

**–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
- `TestSalesAnalysisCallbacks` - –¥–æ–±–∞–≤–ª–µ–Ω `ImportError` –≤ except block
- –¢–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –µ—Å–ª–∏ –º–æ–¥—É–ª—å –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω

–í—Å–µ 21 —Ç–µ—Å—Ç (19 passed, 2 skipped) —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Ö–æ–¥—è—Ç.

---

## üü† P1 - –í–ê–ñ–ù–´–ï (–≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

### 4. test_dmarket_api_phase4_part1.py - 2 –ø—Ä–æ–≤–∞–ª–∞

**–§–∞–π–ª**: `tests/dmarket/test_dmarket_api_phase4_part1.py`

**–ü—Ä–æ–±–ª–µ–º—ã**:
- `test_save_to_cache_with_different_ttl` - –∫—ç—à –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç
- `test_cache_cleanup_on_overflow` - –Ω–µ–≤–µ—Ä–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ cleanup

---

### 5. test_adaptive_polling.py - 1 –ø—Ä–æ–≤–∞–ª

**–§–∞–π–ª**: `tests/dmarket/test_adaptive_polling.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: `test_force_poll_detects_changes` - mock –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

### 6. test_smart_notifier.py - 1 –ø—Ä–æ–≤–∞–ª

**–§–∞–π–ª**: `tests/telegram_bot/test_smart_notifier.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: `test_deprecation_warning_on_import` - warning –Ω–µ –≤—ã–¥–∞—ë—Ç—Å—è

---

## üü° P2 - –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (Ruff warnings)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ Ruff (577 –æ—à–∏–±–æ–∫):

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª-–≤–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|----------|
| PLC2701 | 97 | Import private name from external module |
| PT023 | 96 | pytest-incorrect-mark-parentheses-style |
| PLC1901 | 51 | compare-to-empty-string |
| DTZ001 | 39 | datetime without tzinfo |
| PT001 | 34 | pytest-fixture-incorrect-parentheses-style |
| I001 | 29 | unsorted-imports |
| F401 | 23 | unused-import |
| PLR0904 | 12 | too-many-public-methods |
| PLR1702 | 9 | too-many-nested-blocks |
| S104 | 6 | hardcoded-bind-all-interfaces |
| S301/S403 | 4 | pickle security warnings |

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

1. `src/dmarket/dmarket_api.py` - 50 public methods (PLR0904)
2. `src/dmarket/adaptive_polling.py` - deep nesting (PLR1702)
3. `src/dmarket/backtester.py` - deep nesting (PLR1702)
4. `src/dmarket/intramarket_arbitrage.py` - deep nesting (PLR1702)
5. `src/telegram_bot/health_check.py` - binding to all interfaces (S104)
6. `src/ml/enhanced_predictor.py` - pickle security (S301)

---

## üìã –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ (P0):
1. [x] –û–±–Ω–æ–≤–∏—Ç—å `tests/telegram_bot/test_notifier.py` - 17 —Ç–µ—Å—Ç–æ–≤ ‚úÖ
2. [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `tests/telegram_bot/test_initialization.py` - 3 —Ç–µ—Å—Ç–∞ ‚úÖ
3. [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `tests/telegram_bot/test_telegram_bot_modules.py` - 2 —Ç–µ—Å—Ç–∞ ‚úÖ

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è (P1):
4. [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `tests/dmarket/test_dmarket_api_phase4_part1.py` - 2 —Ç–µ—Å—Ç–∞
5. [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `tests/dmarket/test_adaptive_polling.py` - 1 —Ç–µ—Å—Ç
6. [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `tests/telegram_bot/test_smart_notifier.py` - 1 —Ç–µ—Å—Ç

### –ü–æ–∑–∂–µ (P2):
7. [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å 190 auto-fixable Ruff –æ—à–∏–±–æ–∫
8. [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ deep nesting –≤ 5 —Ñ–∞–π–ª–∞—Ö
9. [ ] Security fixes –¥–ª—è pickle –∏ bind-all-interfaces

---

*–û—Ç—á–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω: 2026-01-08*
