# AGENTS.md ‚Äî config/

> üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π DMarket Telegram Bot

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```
config/
‚îú‚îÄ‚îÄ config.yaml        # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ auto_sell.yaml     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–¥–∞–∂–∏
‚îî‚îÄ‚îÄ item_filters.yaml  # –§–∏–ª—å—Ç—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
```

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```yaml
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π ${VAR:default} —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
token: ${TELEGRAM_BOT_TOKEN}           # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è (–±–µ–∑ default)
api_url: ${DMARKET_API_URL:https://api.dmarket.com}  # –° default

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –•–∞—Ä–¥–∫–æ–¥ —Å–µ–∫—Ä–µ—Ç–æ–≤
token: "1234567890:ABC..."  # –ù–ò–ö–û–ì–î–ê –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å —Ç–æ–∫–µ–Ω—ã!
```

### 2. –¶–µ–Ω—ã –∏ –ø—Ä–æ—Ü–µ–Ω—Ç—ã

```yaml
# ‚úÖ –¶–ï–ù–´ –í USD (–Ω–µ —Ü–µ–Ω—Ç—ã!) - –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç API
min_item_value: 0.50           # $0.50 USD
min_avg_price: 0.50            # $0.50 USD

# ‚úÖ –ü–†–û–¶–ï–ù–¢–´ –ö–ê–ö FLOAT
min_margin_percent: 5.0        # 5%
dmarket_fee_percent: 7.0       # 7% –∫–æ–º–∏—Å—Å–∏—è DMarket

# ‚ö†Ô∏è undercut_cents - –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï, –≤ —Ü–µ–Ω—Ç–∞—Ö
undercut_cents: 1              # $0.01
```

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

**–í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–π:**
- –ß–∏—Å–ª–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã (min < max)
- –ü—Ä–æ—Ü–µ–Ω—Ç 0-100%
- –í—Ä–µ–º—è > 0
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π –∏–≥—Ä (csgo, dota2, rust, tf2)

---

## üìã config.yaml ‚Äî –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏

| –°–µ–∫—Ü–∏—è     | –û–ø–∏—Å–∞–Ω–∏–µ              | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
| ---------- | --------------------- | ----------- |
| `bot`      | Telegram Bot API      | üî¥ CRITICAL  |
| `dmarket`  | DMarket API           | üî¥ CRITICAL  |
| `database` | SQLAlchemy connection | üî¥ CRITICAL  |
| `logging`  | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ           | üü° HIGH      |

### –°–µ–∫—Ü–∏—è bot:

```yaml
bot:
  token: ${TELEGRAM_BOT_TOKEN}        # ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
  username: ${BOT_USERNAME:dmarket_bot}
  webhook:
    url: ${WEBHOOK_URL:}              # –ü—É—Å—Ç–æ = polling mode
    secret: ${WEBHOOK_SECRET:}
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- `token` ‚Äî –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git
- `webhook.url` –ø—É—Å—Ç–æ ‚Üí –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ polling —Ä–µ–∂–∏–º–µ
- `webhook.secret` –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–µ–∫—Ü–∏—è dmarket:

```yaml
dmarket:
  api_url: ${DMARKET_API_URL:https://api.dmarket.com}
  public_key: ${DMARKET_PUBLIC_KEY}   # ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
  secret_key: ${DMARKET_SECRET_KEY}   # ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
  rate_limit: ${API_RATE_LIMIT:30}    # requests per minute
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- `rate_limit: 30` ‚Äî –ù–ï —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å (–ª–∏–º–∏—Ç DMarket API)
- –ö–ª—é—á–∏ —Ö—Ä–∞–Ω–∏—Ç—å –¢–û–õ–¨–ö–û –≤ .env —Ñ–∞–π–ª–µ

### –°–µ–∫—Ü–∏—è database:

```yaml
database:
  url: ${DATABASE_URL:sqlite:///data/dmarket_bot.db}
  echo: ${DEBUG:false}
  pool_size: 5
  max_overflow: 10
```

**Production –∑–Ω–∞—á–µ–Ω–∏—è:**
```yaml
# PostgreSQL –¥–ª—è production
url: postgresql+asyncpg://user:pass@localhost/dmarket_bot
pool_size: 10
max_overflow: 20
```

### –°–µ–∫—Ü–∏—è arbitrage_filters:

```yaml
arbitrage_filters:
  enabled: true
  min_avg_price: 0.50           # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ $0.50
  good_points_percent: 80       # 80% –ø—Ä–æ–¥–∞–∂ —Å –ø—Ä–æ—Ñ–∏—Ç–æ–º
  boost_percent: 150            # –ù–µ –ø–æ–∫—É–ø–∞—Ç—å –µ—Å–ª–∏ —Ü–µ–Ω–∞ > 150% —Å—Ä–µ–¥–Ω–µ–π
  min_sales_volume: 10          # –ú–∏–Ω–∏–º—É–º 10 –ø—Ä–æ–¥–∞–∂ –∑–∞ 7 –¥–Ω–µ–π
  min_profit_margin: 5.0        # –ú–∏–Ω–∏–º—É–º 5% –º–∞—Ä–∂–∏
  outlier_threshold: 2.0        # 2 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
  min_liquidity_score: 60       # –ú–∏–Ω–∏–º—É–º 60 –±–∞–ª–ª–æ–≤ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
  max_time_to_sell_days: 7      # –ú–∞–∫—Å 7 –¥–Ω–µ–π –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
```

---

## üí∞ auto_sell.yaml ‚Äî –ê–≤—Ç–æ–ø—Ä–æ–¥–∞–∂–∞

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è      | –û–ø–∏—Å–∞–Ω–∏–µ                            |
| -------------- | ----------------------------------- |
| `undercut`     | –ù–∏–∂–µ —Ç–æ–ø-–æ—Ñ—Ñ–µ—Ä–∞ –Ω–∞ undercut_cents   |
| `match`        | –†–∞–≤–Ω–æ —Ç–æ–ø-–æ—Ñ—Ñ–µ—Ä—É                    |
| `fixed_margin` | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–∞—Ä–∂–∞ –æ—Ç —Ü–µ–Ω—ã –ø–æ–∫—É–ø–∫–∏ |
| `dynamic`      | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏  |

### –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```yaml
# –ú–∞—Ä–∂–∞ (–≤—Å–µ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
min_margin_percent: 4.0        # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–æ–ø—É—Å—Ç–∏–º–∞—è –º–∞—Ä–∂–∞
max_margin_percent: 12.0       # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—á–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞
default_margin_percent: 8.0    # –ú–∞—Ä–∂–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

# Stop-loss
stop_loss_hours: 48            # –ß–∞—Å—ã –¥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ stop-loss
stop_loss_percent: 5.0         # –ú–∞–∫—Å. —É–±—ã—Ç–æ–∫ –æ—Ç —Ü–µ–Ω—ã –ø–æ–∫—É–ø–∫–∏
```

### Game-specific –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```yaml
game_settings:
  csgo:
    min_margin_percent: 5.0    # CS:GO –±–æ–ª–µ–µ –ª–∏–∫–≤–∏–¥–Ω—ã–π
    max_margin_percent: 15.0
    stop_loss_hours: 72        # –î–æ–ª—å—à–µ –∂–¥–µ–º

  dota2:
    min_margin_percent: 4.0
    stop_loss_hours: 48

  tf2:
    min_margin_percent: 3.0    # TF2 –º–µ–Ω–µ–µ –ª–∏–∫–≤–∏–¥–Ω—ã–π
    stop_loss_hours: 36        # –ë—ã—Å—Ç—Ä–µ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç stop-loss
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```yaml
notifications:
  on_listed: true              # –ü—Ä–∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
  on_sold: true                # –ü—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ
  on_price_adjusted: false     # –ü—Ä–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–µ —Ü–µ–Ω—ã (–º–Ω–æ–≥–æ —Å–ø–∞–º–∞)
  on_stop_loss: true           # ‚ö†Ô∏è –í–°–ï–ì–î–ê true - –≤–∞–∂–Ω–æ!
```

---

## üîç item_filters.yaml ‚Äî –§–∏–ª—å—Ç—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### –ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (bad_items)

```yaml
bad_items:
  - "Sticker"           # –ù–∏–∑–∫–∞—è –º–∞—Ä–∂–∞
  - "Graffiti"          # –ù–∏–∑–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
  - "Music Kit"         # –î–ª–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏
  - "Patch"             # –ù–∏–∑–∫–∏–π —Å–ø—Ä–æ—Å
  - "Key"               # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞
  - "Capsule"           # –ì–µ–º–±–ª–∏–Ω–≥
  - "Container"         # –ì–µ–º–±–ª–∏–Ω–≥
```

### –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (good_categories)

```yaml
good_categories:
  - "Rifle"             # AK-47, M4A4
  - "Pistol"            # Glock, USP-S
  - "Knife"             # –í—ã—Å–æ–∫–∞—è –º–∞—Ä–∂–∞
  - "Gloves"            # –í—ã—Å–æ–∫–∞—è –º–∞—Ä–∂–∞
  - "Sniper Rifle"      # AWP
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

```yaml
# 1. –î–æ–±–∞–≤–∏—Ç—å –≤ good_categories:
good_categories:
  - "New Category"

# 2. –ò–õ–ò –∏—Å–∫–ª—é—á–∏—Ç—å –≤ bad_items:
bad_items:
  - "Unwanted Category"

# 3. –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã:
game_exclusions:
  csgo:
    - "Souvenir"        # –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ –¥–ª—è CS:GO
```

---

## üîß –®–∞–±–ª–æ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É

```yaml
# 1. –í config.yaml –¥–æ–±–∞–≤–∏—Ç—å —Å env variable:
new_setting: ${NEW_SETTING:default_value}

# 2. –í .env.example –¥–æ–±–∞–≤–∏—Ç—å:
# NEW_SETTING=value

# 3. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ
```

### –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—É –≤ auto_sell

```yaml
game_settings:
  new_game:
    min_margin_percent: 4.0
    max_margin_percent: 10.0
    stop_loss_hours: 48
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ª–∏–º–∏—Ç—ã

```yaml
# ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏!
arbitrage_filters:
  min_profit_margin: 7.0    # –ë—ã–ª–æ 5.0

# –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –º–æ–¥—É–ª–∏:
# - src/dmarket/advanced_filters.py
# - src/dmarket/arbitrage_scanner.py
```

---

## ‚úÖ Checklist –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- [ ] –°–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ ${ENV_VAR}, –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥
- [ ] –ï—Å—Ç—å default –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è optional –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –ß–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (% –∫–∞–∫ float)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä –≤ .env.example
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (docs/QUICK_START.md)
- [ ] –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è Pydantic (–µ—Å–ª–∏ –µ—Å—Ç—å) –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### 1. –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

```yaml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
token: $TELEGRAM_BOT_TOKEN
token: ${TELEGRAM_BOT_TOKEN}:  # –õ–∏—à–Ω–µ–µ –¥–≤–æ–µ—Ç–æ—á–∏–µ

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
token: ${TELEGRAM_BOT_TOKEN}
token: ${TELEGRAM_BOT_TOKEN:default}
```

### 2. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ –∏–≥—Ä

```yaml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è)
game_settings:
  cs2: ...       # –ù–µ–≤–µ—Ä–Ω–æ!
  dota: ...      # –ù–µ–≤–µ—Ä–Ω–æ!

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–ª—é—á–∏)
game_settings:
  csgo: ...      # Counter-Strike: GO/CS2
  dota2: ...     # Dota 2
  rust: ...      # Rust
  tf2: ...       # Team Fortress 2
```

### 3. –ü—Ä–æ—Ü–µ–Ω—Ç—ã –∫–∞–∫ int –≤–º–µ—Å—Ç–æ float

```yaml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
min_margin_percent: 5    # int –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
min_margin_percent: 5.0  # –Ø–≤–Ω—ã–π float
```

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª                  | –û–ø–∏—Å–∞–Ω–∏–µ                     |
| --------------------- | ---------------------------- |
| `src/utils/config.py` | Pydantic –º–æ–¥–µ–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
| `docs/QUICK_START.md` | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ      |
| `.env.example`        | –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è  |
| `docs/SECURITY.md`    | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏    |

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –î–µ–∫–∞–±—Ä—å 2025
