# Automation Hooks Configuration
#
# Система событий для автоматизации workflow вокруг skills.
# Поддерживаемые события:
#   - PreToolUse: перед использованием skill
#   - PostToolUse: после использования skill
#   - SessionStart: при старте сессии
#   - SessionEnd: при завершении сессии
#   - OnError: при ошибке

hooks:
  # PreToolUse hooks
  - event: "PreToolUse"
    skills: ["ai-arbitrage-predictor"]
    action:
      script: "scripts/hooks/pre_arbitrage.py"
      description: "Validate market data freshness before scanning"
      async: true
  
  - event: "PreToolUse"
    skills: ["skill-orchestrator"]
    action:
      script: "scripts/hooks/pre_orchestrator.py"
      description: "Check pipeline dependencies before execution"
      async: true
  
  # PostToolUse hooks
  - event: "PostToolUse"
    skills: ["ai-arbitrage-predictor"]
    action:
      script: "scripts/hooks/post_arbitrage.py"
      description: "Log predictions for analytics and backtesting"
      async: true
  
  - event: "PostToolUse"
    skills: ["skill-profiler"]
    action:
      script: "scripts/hooks/post_profiler.py"
      description: "Save profiling metrics to database"
      async: true
  
  - event: "PostToolUse"
    skills: ["*"]
    action:
      script: "scripts/hooks/post_any_skill.py"
      description: "Universal logger for all skill uses"
      async: true
  
  # SessionStart hooks
  - event: "SessionStart"
    action:
      script: "scripts/hooks/session_start.py"
      description: "Initialize API connections, load cache, start monitoring"
      async: true
      timeout: 10  # seconds
  
  # SessionEnd hooks
  - event: "SessionEnd"
    action:
      script: "scripts/hooks/session_end.py"
      description: "Cleanup resources, save state, flush logs"
      async: true
      timeout: 5  # seconds
  
  # OnError hooks
  - event: "OnError"
    skills: ["*"]
    action:
      script: "scripts/hooks/error_handler.py"
      description: "Send to Sentry, log error, retry logic"
      async: true
  
  - event: "OnError"
    skills: ["ai-arbitrage-predictor"]
    action:
      script: "scripts/hooks/arbitrage_error_handler.py"
      description: "Specific error handling for ML predictions"
      async: true
