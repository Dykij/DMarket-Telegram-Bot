# ðŸ”” Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹

## ðŸ“‹ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### Ð¨Ð°Ð³ 1: ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Chat ID

```bash
python get_chat_id.py
```

Ð—Ð°Ñ‚ÐµÐ¼ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð»ÑŽÐ±Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð±Ð¾Ñ‚Ñƒ Ð² Telegram. Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð²Ñ‹Ð²ÐµÐ´ÐµÑ‚ Ð²Ð°Ñˆ Chat ID.

### Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»

ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ `.env` Ð¸ Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð½Ñ‹Ð¹ Chat ID:

```env
# ID Ð²Ð°ÑˆÐµÐ³Ð¾ Ñ‡Ð°Ñ‚Ð° Ð´Ð»Ñ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹
ADMIN_CHAT_ID=123456789  # Ð’Ð°Ñˆ Chat ID

# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
NOTIFICATIONS_ENABLED=true

# Ð¢Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ (Ð¿Ð¾Ð»Ð½Ð¾Ðµ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ)
SILENT_MODE=false
```

### Ð¨Ð°Ð³ 3: ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð±Ð¾Ñ‚Ð°

```bash
python -m src.main
```

---

## ðŸŽ¯ ÐšÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ

ÐšÐ¾Ð³Ð´Ð° Ð±Ð¾Ñ‚ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ Ð²Ñ‹Ð³Ð¾Ð´Ð½ÑƒÑŽ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ, Ð²Ñ‹ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ:

```
ðŸŽ¯ ÐÑ€Ð±Ð¸Ñ‚Ñ€Ð°Ð¶Ð½Ð°Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ”« AK-47 | Redline (Field-Tested)

ðŸŽ® Ð˜Ð³Ñ€Ð°: CSGO
ðŸ’° ÐŸÑ€Ð¾Ñ„Ð¸Ñ‚: +$3.50
ðŸ“ˆ Ð”Ð¾Ñ…Ð¾Ð´Ð½Ð¾ÑÑ‚ÑŒ: 15.2%
ðŸ’µ Ð¦ÐµÐ½Ð° Ð²Ñ…Ð¾Ð´Ð°: $23.00
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### ðŸŒ™ Ð¢Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼ (Silent Mode)

**ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹** (23:00 - 08:00):
- Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´ÑÑ‚ **Ð±ÐµÐ· Ð·Ð²ÑƒÐºÐ°**
- Ð’Ñ‹ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ Ð¸Ñ… ÑƒÑ‚Ñ€Ð¾Ð¼ Ð² ÑÐ¿Ð¸ÑÐºÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹
- Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð²Ð¸Ð±Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð¾Ñ‡ÑŒÑŽ

**Ð ÑƒÑ‡Ð½Ð¾Ð¹** (Ñ‡ÐµÑ€ÐµÐ· .env):
```env
SILENT_MODE=true  # ÐŸÐ¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð’Ð¡Ð• ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
```

### ðŸ›¡ï¸ Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ ÑÐ¿Ð°Ð¼Ð°

- **1 ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð½Ð° Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚** Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 30 Ð¼Ð¸Ð½ÑƒÑ‚
- Ð¢Ð¾Ð»ÑŒÐºÐ¾ **Ñ‚Ð¾Ð¿-3 Ð½Ð°Ñ…Ð¾Ð´ÐºÐ¸** Ð¸Ð· ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÐºÐ°Ð½Ð°
- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ **Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¾Ñ„Ð¸Ñ‚Ñƒ** ($0.50 Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ)

---

## âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸

### Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ„Ð¸Ñ‚

Ð’ `src/dmarket/arbitrage_scanner.py`:

```python
self.min_profit = 1.0  # ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ $1 Ð¿Ñ€Ð¸Ð±Ñ‹Ð»Ð¸ Ð´Ð»Ñ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
```

### Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ cooldown Ð¿ÐµÑ€Ð¸Ð¾Ð´

Ð’ `src/dmarket/arbitrage_scanner.py`:

```python
self._notification_cooldown = 3600  # 1 Ñ‡Ð°Ñ Ð²Ð¼ÐµÑÑ‚Ð¾ 30 Ð¼Ð¸Ð½ÑƒÑ‚
```

### Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹

Ð’ Ð¼ÐµÑ‚Ð¾Ð´Ðµ `_send_notifications`:

```python
top_items = results[:5]  # Ð¢Ð¾Ð¿-5 Ð²Ð¼ÐµÑÑ‚Ð¾ Ñ‚Ð¾Ð¿-3
```

### Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ‡Ð°ÑÑ‹ Ñ‚Ð¸Ñ…Ð¾Ð³Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ð°

Ð’ `src/telegram_bot/utils/notifications.py`:

```python
# Ð¡ 22:00 Ð´Ð¾ 09:00 Ð²Ð¼ÐµÑÑ‚Ð¾ 23:00-08:00
is_silent_night = current_hour >= 22 or current_hour < 9
```

---

## ðŸ” ÐžÑ‚Ð»Ð°Ð´ÐºÐ°

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²

```bash
# Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ð»Ð¾Ð³Ð¸
tail -f logs/dmarket_bot.log

# Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
grep "Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ" logs/dmarket_bot.log
```

### ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ

```python
import asyncio
from src.telegram_bot.utils.notifications import send_profit_alert

# Ð¢ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ
test_item = {
    "title": "Test Item",
    "game": "csgo",
    "profit": 5.0,
    "profit_percent": 20.0,
    "price": {"amount": 2500}
}

asyncio.run(send_profit_alert(test_item))
```

### Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

**Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð½Ðµ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´ÑÑ‚:**
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ `ADMIN_CHAT_ID` Ð² `.env`
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ `NOTIFICATIONS_ENABLED=true`
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ `SILENT_MODE=false`
4. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½

**ÐŸÑ€Ð¸Ñ…Ð¾Ð´ÑÑ‚ Ð½Ðµ Ð²ÑÐµ Ð½Ð°Ñ…Ð¾Ð´ÐºÐ¸:**
- Ð­Ñ‚Ð¾ Ð½Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾ - Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð°Ð½Ñ‚Ð¸-ÑÐ¿Ð°Ð¼ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€
- Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾ Ñ‚Ð¾Ð¿-3 Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð°Ñ…
- Cooldown 30 Ð¼Ð¸Ð½ÑƒÑ‚ Ð½Ð° Ð¾Ð´Ð¸Ð½ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚

**Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ ÑÐ¾ Ð·Ð²ÑƒÐºÐ¾Ð¼ Ð½Ð¾Ñ‡ÑŒÑŽ:**
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ð°ÑÐ¾Ð²Ð¾Ð¹ Ð¿Ð¾ÑÑ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
- Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ñ‡Ð°ÑÑ‹ Ñ‚Ð¸Ñ…Ð¾Ð³Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ð° Ð² ÐºÐ¾Ð´Ðµ

---

## ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² Ð²Ð°Ñˆ Ð±Ð¾Ñ‚ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸:

```python
# Ð’ simplified_menu_handler.py
async def notification_stats(update, context):
    scanner = context.bot_data.get("scanner")
    if scanner:
        sent_count = len(scanner._sent_notifications)
        await update.message.reply_text(
            f"ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹:\n"
            f"ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… cooldown: {sent_count}\n"
            f"Ð’ÑÐµÐ³Ð¾ Ð½Ð°Ñ…Ð¾Ð´Ð¾Ðº: {scanner.total_items_found}"
        )
```

---

## ðŸš€ Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

### Ð“Ñ€ÑƒÐ¿Ð¿Ð¾Ð²Ñ‹Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ

Ð’Ð¼ÐµÑÑ‚Ð¾ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹, Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð´Ð°Ð¹Ð´Ð¶ÐµÑÑ‚:

```python
from src.telegram_bot.utils.notifications import send_batch_alert

# ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ²Ð¾Ð´ÐºÑƒ Ð¿Ð¾ Ð²ÑÐµÐ¼ Ð½Ð°Ñ…Ð¾Ð´ÐºÐ°Ð¼
await send_batch_alert(
    items=results,
    summary="ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ñ‡Ð°Ñ"
)
```

### Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐµ

```python
from src.telegram_bot.utils.notifications import send_scanner_status

# Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¾ ÑÑ‚Ð°Ñ€Ñ‚Ðµ
await send_scanner_status("started", {
    "games": "CS:GO, Dota2, Rust",
    "mode": "standard"
})
```

---

## ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚Ñ‹

1. **ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ñ `SILENT_MODE=false`** Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ
2. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ñ„Ð¸Ñ‚** Ð¿Ð¾Ð´ Ð²Ð°ÑˆÐ¸ Ð½ÑƒÐ¶Ð´Ñ‹
3. **Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ‚Ð¸Ñ…Ð¸Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼** Ð´Ð»Ñ ÐºÐ¾Ð¼Ñ„Ð¾Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ ÑÐ½Ð°
4. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ Ð»Ð¾Ð³Ð¸** Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸
5. **Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ** Ð´Ð»Ñ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ

---

## ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

Ð•ÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ `.env` Ñ„Ð°Ð¹Ð»
2. ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð»Ð¾Ð³Ð¸ Ð±Ð¾Ñ‚Ð°
3. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ `get_chat_id.py` Ð²ÐµÑ€Ð½ÑƒÐ» ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹Ð¹ ID
4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð¸Ð¼ÐµÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ñƒ

**Ð’Ð°Ð¶Ð½Ð¾:** Ð‘Ð¾Ñ‚ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð½Ð°Ð¿Ð¸ÑÐ°Ð»Ð¸ ÐµÐ¼Ñƒ `/start`!
