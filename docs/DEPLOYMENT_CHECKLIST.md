# ‚úÖ Deployment Checklist (Staging ‚Üí Production)

–≠—Ç–æ—Ç —á–µ–∫–ª–∏—Å—Ç –ø–æ–º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤—Å–µ –Ω–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞ staging –∏ production.

---

## üéØ Pre-Deployment (–õ–æ–∫–∞–ª—å–Ω–æ)

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [x] ‚úÖ Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ (396/396)
- [x] ‚úÖ –õ–∏–Ω—Ç–∏–Ω–≥ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (ruff)
- [x] ‚úÖ –ò–º–ø–æ—Ä—Ç—ã –≤–∞–ª–∏–¥–Ω—ã
- [ ] ‚è≥ Integration —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)
- [ ] ‚è≥ E2E —Ç–µ—Å—Ç—ã (Telegram bot flow)

### 2. –ö–æ–¥

- [x] ‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã —Ñ–∞–π–ª–æ–≤
- [x] ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] ‚è≥ CHANGELOG.md –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] ‚è≥ Git –∫–æ–º–º–∏—Ç—ã —Å–¥–µ–ª–∞–Ω—ã

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- [ ] ‚è≥ `.env.staging` —Å–æ–∑–¥–∞–Ω
- [ ] ‚è≥ `.env.production` —Å–æ–∑–¥–∞–Ω (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ git!)
- [ ] ‚è≥ `config.yaml` –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [ ] ‚è≥ Rate limits –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üß™ Staging Deployment

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# 1. –°–æ–∑–¥–∞—Ç—å staging branch
git checkout -b staging
git merge main

# 2. –°–æ–∑–¥–∞—Ç—å .env.staging
cp .env.example .env.staging
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å STAGING –∫–ª—é—á–∞–º–∏ DMarket

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
pip install aiolimiter vcrpy hypothesis  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### –®–∞–≥ 2: DRY_RUN —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í .env.staging —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
DRY_RUN=true
ENABLE_PRE_SCAN=true
MIN_LIQUIDITY_SCORE=50
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤ DRY_RUN —Ä–µ–∂–∏–º–µ**:

```bash
python -m src.main
```

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**:

- [ ] ‚è≥ `/start` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- [ ] ‚è≥ "API Check" - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ DMarket
- [ ] ‚è≥ "Automatic Arbitrage" ‚Üí Boost - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –ø–æ–∫—É–ø–æ–∫
- [ ] ‚è≥ "View Items" - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- [ ] ‚è≥ "Detailed Settings" - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –®–∞–≥ 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
tail -f logs/bot.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Sentry (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
# https://sentry.io/your-project/issues/
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**:

- [ ] ‚è≥ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [ ] ‚è≥ API rate limits —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è
- [ ] ‚è≥ DRY_RUN –ø–æ–º–µ—Ç–∫–∏ –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö
- [ ] ‚è≥ –ü–∞–º—è—Ç—å –Ω–µ —É—Ç–µ–∫–∞–µ—Ç (psutil)

### –®–∞–≥ 4: Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º
python -m cProfile -o profile.stats -m src.main

# –ê–Ω–∞–ª–∏–∑
python -m pstats profile.stats
```

**–ú–µ—Ç—Ä–∏–∫–∏**:

- [ ] ‚è≥ Aggregated Pre-Scan < 2 —Å–µ–∫
- [ ] ‚è≥ Full Scan (standard) < 30 —Å–µ–∫
- [ ] ‚è≥ Telegram response time < 1 —Å–µ–∫
- [ ] ‚è≥ –ü–∞–º—è—Ç—å < 500 MB

---

## üöÄ Production Deployment

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ LIVE —Ä–µ–∂–∏–º–æ–º

- [ ] ‚è≥ Staging —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- [ ] ‚è≥ DRY_RUN –æ—Ç–∫–ª—é—á—ë–Ω: `DRY_RUN=false`
- [ ] ‚è≥ –ë–∞–ª–∞–Ω—Å DMarket –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [ ] ‚è≥ Rate limits –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã —Å DMarket support
- [ ] ‚è≥ Telegram bot token PRODUCTION
- [ ] ‚è≥ Backup –ë–î —Å–¥–µ–ª–∞–Ω

### –®–∞–≥ 1: Deploy –Ω–∞ production —Å–µ—Ä–≤–µ—Ä

```bash
# 1. SSH –≤ production —Å–µ—Ä–≤–µ—Ä
ssh user@your-production-server

# 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ pull
git pull origin main

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt --no-cache-dir

# 4. –°–æ–∑–¥–∞—Ç—å .env.production
cp .env.example .env
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å PRODUCTION –∫–ª—é—á–∞–º–∏
```

### –®–∞–≥ 2: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –≤ LIVE —Ä–µ–∂–∏–º–µ

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–í `.env.production`:

```env
DRY_RUN=false
MAX_BUY_PRICE_USD=10.0      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏
MAX_DAILY_TRADES=20          # –ú–∞–∫—Å–∏–º—É–º —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å
AUTO_SELL_ENABLED=false      # –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-–ø—Ä–æ–¥–∞–∂—É —Å–Ω–∞—á–∞–ª–∞
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º**:

```bash
# Tmux session –¥–ª—è –¥–æ–ª–≥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
tmux new -s dmarket-bot

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
python -m src.main
```

**–ü–µ—Ä–≤—ã–µ 30 –º–∏–Ω—É—Ç**:

- [ ] ‚è≥ –ù–∞–±–ª—é–¥–∞—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É –≤—Ä—É—á–Ω—É—é
- [ ] ‚è≥ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ API –∫–ª—é—á–∏ –≤–∞–ª–∏–¥–Ω—ã
- [ ] ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Sentry –Ω–∞ –æ—à–∏–±–∫–∏

### –®–∞–≥ 3: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–µ–Ω—å 1-3**: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```env
MAX_BUY_PRICE_USD=10.0
MAX_DAILY_TRADES=20
MIN_LIQUIDITY_SCORE=70
MIN_SPREAD_PERCENT=5.0
```

**–î–µ–Ω—å 4-7**: –£–º–µ—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```env
MAX_BUY_PRICE_USD=30.0
MAX_DAILY_TRADES=50
MIN_LIQUIDITY_SCORE=60
MIN_SPREAD_PERCENT=3.0
```

**–î–µ–Ω—å 8+**: –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```env
MAX_BUY_PRICE_USD=100.0
MAX_DAILY_TRADES=100
MIN_LIQUIDITY_SCORE=50
MIN_SPREAD_PERCENT=2.0
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Production

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

**–ö–∞–∂–¥—ã–π —á–∞—Å**:
- [ ] ‚è≥ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–∫—É–ø–æ–∫
- [ ] ‚è≥ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–∂
- [ ] ‚è≥ –ü—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–∫–∏
- [ ] ‚è≥ API rate limit usage

**–ö–∞–∂–¥—ã–π –¥–µ–Ω—å**:
- [ ] ‚è≥ –ë–∞–ª–∞–Ω—Å DMarket
- [ ] ‚è≥ Inventory size
- [ ] ‚è≥ Failed transactions
- [ ] ‚è≥ Sentry errors count

**–ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é**:
- [ ] ‚è≥ ROI (Return on Investment)
- [ ] ‚è≥ Liquidity trends
- [ ] ‚è≥ Best/worst performers
- [ ] ‚è≥ Performance optimization

### Alerts –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**Critical** (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):
- API key invalid
- Balance < $10
- Critical errors in Sentry
- Bot crash

**High** (–≤ —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞):
- Failed trades > 5
- Rate limit exceeded
- Memory > 1 GB

**Medium** (–≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è):
- Profit margin < 2%
- No trades in 6 hours
- Liquidity score degradation

---

## üîÑ Rollback –ø–ª–∞–Ω

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
pkill -f "src.main"

# 2. –í–µ—Ä–Ω—É—Ç—å –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é
git checkout <previous-commit>

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
python -m src.main
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏**:

- **–£—Ç–µ—á–∫–∞ API –∫–ª—é—á–µ–π** ‚Üí –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏—Ç—å –Ω–∞ DMarket
- **–ü–æ—Ç–µ—Ä—è –±–∞–ª–∞–Ω—Å–∞** ‚Üí –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
- **Spam –ø–æ–∫—É–ø–æ–∫** ‚Üí DRY_RUN=true, restart

---

## üìã Post-Deployment

### –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–∏

- [ ] ‚è≥ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å
- [ ] ‚è≥ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
- [ ] ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Auto-Sell (–µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ)
- [ ] ‚è≥ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ –∏–≥—Ä—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [ ] ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å README.md —Å production notes
- [ ] ‚è≥ –°–æ–∑–¥–∞—Ç—å runbook –¥–ª—è operations
- [ ] ‚è≥ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å lessons learned

---

## üÜò Support & Troubleshooting

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**:

1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏: `tail -f logs/bot.log`
2. –ü—Ä–æ–≤–µ—Ä—å Sentry: https://sentry.io
3. –ü—Ä–æ–≤–µ—Ä—å DMarket API status: https://dmarket.com/status
4. –ü—Ä–æ–≤–µ—Ä—å Telegram Bot API: https://api.telegram.org/bot<TOKEN>/getMe

**–ö–æ–Ω—Ç–∞–∫—Ç—ã**:

- DMarket Support: support@dmarket.com
- Telegram Bot API: https://core.telegram.org/bots/support

---

**–î–∞—Ç–∞**: 02 —è–Ω–≤–∞—Ä—è 2026 –≥.
**–ê–≤—Ç–æ—Ä**: GitHub Copilot CLI
**–°—Ç–∞—Ç—É—Å**: ‚è≥ Ready for Staging
