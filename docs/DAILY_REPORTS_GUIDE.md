# üìä –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º –æ—Ç—á–µ—Ç–∞–º

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 23 –Ω–æ—è–±—Ä—è 2025 –≥.
**–í–µ—Ä—Å–∏—è**: 1.0

---

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º —Ä–∞–∑ –≤ –¥–µ–Ω—å. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–æ—Ä–≥–æ–≤–ª–∏, –≤—ã—è–≤–ª—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞

–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ä–∞–∑–¥–µ–ª—ã:

### 1. üíº –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫

- **–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ —Ç–æ—Ä–≥–æ–≤–ª–∏
- **–£—Å–ø–µ—à–Ω—ã—Ö** - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–¥–µ–ª–∫–∏
- **–û—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö** - –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏
- **–ù–µ—É–¥–∞—á–Ω—ã—Ö** - —Å–¥–µ–ª–∫–∏ —Å –æ—à–∏–±–∫–∞–º–∏
- **–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å** - —Å—É–º–º–∞—Ä–Ω–∞—è –ø—Ä–∏–±—ã–ª—å –≤ USD
- **–°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª–∏** - —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏

### 2. ‚ö†Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ API

- **Rate limit** - –æ—à–∏–±–∫–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- **Timeout** - –æ—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **Connection** - –æ—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **Authentication** - –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **Other API errors** - –ø—Ä–æ—á–∏–µ –æ—à–∏–±–∫–∏ API
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤

### 3. üîç –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

- **–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—Å–∫–æ–≤ —Å–∫–∞–Ω–µ—Ä–∞
- **–ù–∞–π–¥–µ–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π** - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –∞—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª `.env`:

```env
# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (true/false)
DAILY_REPORT_ENABLED=true

# –ß–∞—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞ (0-23, UTC)
DAILY_REPORT_HOUR=9

# –ú–∏–Ω—É—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞ (0-59)
DAILY_REPORT_MINUTE=0

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ –æ—Ç—á–µ—Ç (1-30)
DAILY_REPORT_DAYS=1
```

### YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ `config/config.yaml`:

```yaml
daily_report:
  enabled: true
  report_time_hour: 9    # 09:00 UTC
  report_time_minute: 0
  include_days: 1        # –û—Ç—á–µ—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`DAILY_REPORT_ENABLED=true`) –æ—Ç—á–µ—Ç –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤—Å–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.

**–ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –æ—Ç—á–µ—Ç–∞:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ `ADMIN_USERS` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. –ï—Å–ª–∏ –Ω–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ `ALLOWED_USERS`

### –†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –æ—Ç—á–µ—Ç –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```
/dailyreport
```

#### –û—Ç—á–µ—Ç –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –æ—Ç—á–µ—Ç–∞ (–æ—Ç 1 –¥–æ 30):

```
/dailyreport 7
```

–≠—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç—á–µ—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π.

---

## üìä –ü—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞

```
üìä –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç
üìÖ 23.11.2025

=== üíº –°–¥–µ–ª–∫–∏ ===
–í—Å–µ–≥–æ: 15
–£—Å–ø–µ—à–Ω—ã—Ö: 12 (80.0%)
–û—Ç–º–µ–Ω—ë–Ω–Ω—ã—Ö: 2 (13.3%)
–ù–µ—É–¥–∞—á–Ω—ã—Ö: 1 (6.7%)

üí∞ –û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: $45.32
üìà –°—Ä–µ–¥–Ω–∏–π %: 8.5%

=== ‚ö†Ô∏è –û—à–∏–±–∫–∏ API ===
Rate limit: 2
Timeout: 1
Connection: 0
Authentication: 0
Other: 1
üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö: 0

=== üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ===
–í—ã–ø–æ–ª–Ω–µ–Ω–æ: 48
–ù–∞–π–¥–µ–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π: 127

‚è±Ô∏è –ü–µ—Ä–∏–æ–¥: 22.11.2025 09:00 - 23.11.2025 09:00
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

1. **DailyReportScheduler** (`src/utils/daily_report_scheduler.py`)
   - –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ APScheduler
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤

2. **–ú–µ—Ç–æ–¥—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ DatabaseManager** (`src/utils/database.py`)
   - `get_trade_statistics()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫
   - `get_error_statistics()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
   - `get_scan_statistics()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

3. **–ö–æ–º–∞–Ω–¥–∞ `/dailyreport`** (`src/telegram_bot/commands/daily_report_command.py`)
   - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä—É—á–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –æ—Ç—á–µ—Ç–∞

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ main.py**
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ bot_data
   - Graceful shutdown

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### APScheduler

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AsyncIOScheduler` —Å `CronTrigger` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

```python
scheduler = AsyncIOScheduler()
scheduler.add_job(
    self._generate_and_send_report,
    trigger=CronTrigger(
        hour=report_time.hour,
        minute=report_time.minute,
    ),
    id="daily_report",
)
```

### SQL –∑–∞–ø—Ä–æ—Å—ã

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é SQL –∑–∞–ø—Ä–æ—Å–æ–≤:

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫:**
```sql
SELECT
    COUNT(*) as total_trades,
    SUM(CASE WHEN status = 'successful' THEN 1 ELSE 0 END) as successful,
    SUM(CASE WHEN status = 'cancelled' THEN 1 ELSE 0 END) as cancelled,
    SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END) as failed,
    SUM(profit_usd) as total_profit_usd,
    AVG(profit_percent) as avg_profit_percent
FROM trades
WHERE created_at BETWEEN :start_date AND :end_date
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ API:**
```sql
SELECT error_message
FROM command_log
WHERE
    success = 0 AND
    error_message LIKE '%API%' AND
    executed_at BETWEEN :start_date AND :end_date
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–π:**
```sql
SELECT
    COUNT(*) as scans_performed,
    SUM(CAST(json_extract(parameters, '$.opportunities_found') AS INTEGER))
        as opportunities_found
FROM command_log
WHERE
    command = '/scan' AND
    executed_at BETWEEN :start_date AND :end_date
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫

–û—à–∏–±–∫–∏ API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É—é—Ç—Å—è:

```python
def _categorize_error(error_message: str) -> str:
    """–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É –ø–æ —Ç–∏–ø—É."""
    error_lower = error_message.lower()

    if "rate" in error_lower or "limit" in error_lower:
        return "rate_limit"
    elif "timeout" in error_lower:
        return "timeout"
    elif "connection" in error_lower or "connect" in error_lower:
        return "connection"
    elif "auth" in error_lower or "unauthorized" in error_lower:
        return "authentication"
    else:
        return "other"
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç:
- –ü–æ–ª—É—á–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã
- –í—ã–∑—ã–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/dailyreport`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–æ–º–∞–Ω–¥–µ:

```python
if user_id not in admin_users:
    await update.message.reply_text(
        "‚ùå –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º"
    )
    return
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞:

```python
try:
    await scheduler.send_manual_report(days=days)
except Exception as e:
    logger.exception("Failed to send manual daily report: %s", e)
    await status_message.edit_text(
        f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞:\n{e!s}"
    )
```

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** (–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞)
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `.env` –∏–ª–∏ `config.yaml`
   - –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `DailyReportScheduler`
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ scheduler –≤ `bot_data`

2. **–ó–∞–ø—É—Å–∫** (–ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–æ—Ç–∞)
   - –í—ã–∑–æ–≤ `await scheduler.start()`
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è cron –∑–∞–¥–∞–Ω–∏—è –≤ APScheduler

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
   - –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
   - –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –¥–Ω–µ–π
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—Å–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

4. **–†—É—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
   - –ü–æ –∫–æ–º–∞–Ω–¥–µ `/dailyreport [–¥–Ω–∏]`
   - –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞

5. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞** (–ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞)
   - –í—ã–∑–æ–≤ `await scheduler.stop()`
   - Graceful shutdown APScheduler

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —É—Ä–æ–≤–Ω—è—Ö:

```python
logger.info("Daily Report Scheduler initialized at %s", time)
logger.info("Daily Report Scheduler started")
logger.info("Generating daily report for %s days", days)
logger.info("Daily report sent to %s users", len(admin_users))
logger.error("Failed to send daily report to user %s", user_id)
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

```python
# –í –∫–æ–Ω—Å–æ–ª–∏ Python
from src.utils.daily_report_scheduler import DailyReportScheduler

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
print(scheduler.scheduler.get_jobs())
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í Telegram
/dailyreport 1
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
grep "Daily Report Scheduler" logs/bot.log

# –õ–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–æ–≤
grep "Daily report sent" logs/bot.log

# –û—à–∏–±–∫–∏
grep "ERROR.*daily" logs/bot.log
```

---

## ‚ùì FAQ

### –ü–æ—á–µ–º—É –æ—Ç—á–µ—Ç –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç?

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DAILY_REPORT_ENABLED=true` –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –≤ —Å–ø–∏—Å–∫–µ `ADMIN_USERS` –∏–ª–∏ `ALLOWED_USERS`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä–µ–º—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (UTC!)
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏?

–ò–∑–º–µ–Ω–∏—Ç–µ `DAILY_REPORT_HOUR` –∏ `DAILY_REPORT_MINUTE` –≤ `.env`:

```env
DAILY_REPORT_HOUR=12    # 12:00 UTC
DAILY_REPORT_MINUTE=30  # 12:30 UTC
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞.

### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç –∑–∞ –Ω–µ–¥–µ–ª—é?

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```
/dailyreport 7
```

### –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã?

–î–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```env
DAILY_REPORT_ENABLED=false
```

–ö–æ–º–∞–Ω–¥–∞ `/dailyreport` –±—É–¥–µ—Ç –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –¥–æ—Å—Ç—É–ø–Ω–∞.

---

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞ (–ø–æ–ª–Ω—ã–π/–∫—Ä–∞—Ç–∫–∏–π)
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –≤ —Ñ–∞–π–ª (CSV, PDF)
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º –ø–µ—Ä–∏–æ–¥–æ–º
- [ ] –ü—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∞–Ω–æ–º–∞–ª–∏—è—Ö (—Ä–µ–∑–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ –∏ —Ç.–¥.)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤
- [ ] Email-—Ä–∞—Å—Å—ã–ª–∫–∞ –æ—Ç—á–µ—Ç–æ–≤

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [QUICK_START.md](QUICK_START.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞
- [ARCHITECTURE.md](ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [logging_and_error_handling.md](logging_and_error_handling.md) - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [PROJECT_ROADMAP.md](../PROJECT_ROADMAP.md) - –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

---

**–ê–≤—Ç–æ—Ä**: DMarket Bot Team
**–õ–∏—Ü–µ–Ω–∑–∏—è**: MIT
